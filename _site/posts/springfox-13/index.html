<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="zh-CN" >
  <!-- The Head -->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="stylesheet" href="/assets/css/custom.css">
  <meta name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover">

  

  

  
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="springfox 源码分析(十三) 自定义扩展实现接口的排序" />
<meta property="og:locale" content="zh_CN" />
<meta name="description" content="springfox 源码系列" />
<meta property="og:description" content="springfox 源码系列" />
<link rel="canonical" href="/posts/springfox-13/" />
<meta property="og:url" content="/posts/springfox-13/" />
<meta property="og:site_name" content="八一菜刀" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-05-29T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="springfox 源码分析(十三) 自定义扩展实现接口的排序" />
<meta name="twitter:site" content="@xiaoymin" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-10-14T16:49:52+08:00","datePublished":"2019-05-29T00:00:00+08:00","description":"springfox 源码系列","headline":"springfox 源码分析(十三) 自定义扩展实现接口的排序","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/springfox-13/"},"url":"/posts/springfox-13/"}</script>
<!-- End Jekyll SEO tag -->

  

  <title>springfox 源码分析(十三) 自定义扩展实现接口的排序 | 八一菜刀
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">
<link rel="manifest" href="/assets/img/favicons/site.webmanifest">
<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="八一菜刀">
<meta name="application-name" content="八一菜刀">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  
  
  <link rel="preconnect" href="https://fonts.googleapis.com" >
  <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin>
  
  <link rel="preconnect" href="https://fonts.googleapis.com" >
  <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
  
  <link rel="preconnect" href="https://cdn.jsdelivr.net" >
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
  

  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">
  

  <!-- GA -->
  

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css">

  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.2/dist/tocbot.min.css">
  

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
  <!-- Manific Popup -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css">
  

  <!-- JavaScript -->

  
  <!-- Switch the mode between dark and light. -->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() {
      return 'mode';
    }
    static get MODE_ATTR() {
      return 'data-mode';
    }
    static get DARK_MODE() {
      return 'dark';
    }
    static get LIGHT_MODE() {
      return 'light';
    }
    static get ID() {
      return 'mode-toggle';
    }

    constructor() {
      if (this.hasMode) {
        if (this.isDarkMode) {
          if (!this.isSysDarkPrefer) {
            this.setDark();
          }
        } else {
          if (this.isSysDarkPrefer) {
            this.setLight();
          }
        }
      }

      let self = this;

      /* always follow the system prefers */
      this.sysDarkPrefers.addEventListener('change', () => {
        if (self.hasMode) {
          if (self.isDarkMode) {
            if (!self.isSysDarkPrefer) {
              self.setDark();
            }
          } else {
            if (self.isSysDarkPrefer) {
              self.setLight();
            }
          }

          self.clearMode();
        }

        self.notify();
      });
    } /* constructor() */

    get sysDarkPrefers() {
      return window.matchMedia('(prefers-color-scheme: dark)');
    }

    get isSysDarkPrefer() {
      return this.sysDarkPrefers.matches;
    }

    get isDarkMode() {
      return this.mode === ModeToggle.DARK_MODE;
    }

    get isLightMode() {
      return this.mode === ModeToggle.LIGHT_MODE;
    }

    get hasMode() {
      return this.mode != null;
    }

    get mode() {
      return sessionStorage.getItem(ModeToggle.MODE_KEY);
    }

    /* get the current mode on screen */
    get modeStatus() {
      if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) {
        return ModeToggle.DARK_MODE;
      } else {
        return ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      document.documentElement.removeAttribute(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }

    /* Notify another plugins that the theme mode has changed */
    notify() {
      window.postMessage(
        {
          direction: ModeToggle.ID,
          message: this.modeStatus
        },
        '*'
      );
    }

    flipMode() {
      if (this.hasMode) {
        if (this.isSysDarkPrefer) {
          if (this.isLightMode) {
            this.clearMode();
          } else {
            this.setLight();
          }
        } else {
          if (this.isDarkMode) {
            this.clearMode();
          } else {
            this.setDark();
          }
        }
      } else {
        if (this.isSysDarkPrefer) {
          this.setLight();
        } else {
          this.setDark();
        }
      }

      this.notify();
    } /* flipMode() */
  } /* ModeToggle */

  const modeToggle = new ModeToggle();
</script>

  

  <!-- A placeholder to allow defining custom metadata -->

</head>

  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle">
      
        
        <img src="/images/common/avatar.jpeg" width="112" height="112" alt="avatar" onerror="this.style.display='none'">
      
    </a>

    <h1 class="site-title">
      <a href="/">八一菜刀</a>
    </h1>
    <p class="site-subtitle fst-italic mb-0">Speak less,Do more</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>首页</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>分类</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>标签</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>归档</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>关于</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="mode-toggle btn" aria-label="Switch Mode">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/xiaoymin"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://twitter.com/xiaoymin"
          aria-label="twitter"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['xiaoymin','foxmail.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">
                首页
              </a>
            </span>

          
        
          
        
          
            
              <span>springfox 源码分析(十三) 自定义扩展实现接口的排序</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      文章
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="搜索..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">取消</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  <!-- CDN URL -->
  

  <!-- Add image path -->
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  

  
  

  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>springfox 源码分析(十三) 自定义扩展实现接口的排序</h1>

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        发表于
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1559059200"
  data-df="YYYY/MM/DD"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  2019/05/29
</time>

      </span>

      <!-- lastmod date -->
      
      <span>
        更新于
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1697273392"
  data-df="YYYY/MM/DD"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  2023/10/14
</time>

      </span>
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          作者

          <em>
            
            
            <a href="https://twitter.com/xiaoymin">xiaoymin</a>
            

          </em>
        </span>

        <!-- read time -->
        <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="3492 字"
>
  <em>19 分钟</em>阅读</span>

      </div>
      <!-- .d-flex -->
    </div>
    <!-- .post-meta -->
  </header>

  <div class="content">
    <p>很多时候,Swagger定义的标准并不能满足我们实际的需求,比如拿分组后的接口来说,有适合我们希望我们的接口能够排序,假如我们当前有一个注册的需求实现,那么他的接口可能是这样的：</p>

<p>1.获取验证码 -&gt; 2.校验用户名是否有效 -&gt; 3.注册验证 -&gt; 4.登录</p>

<p>如果我们没有排序的情况下,上面的接口对于开发人员来说可能是杂乱无章的,对于初级的接口对接人员来说,排序更能让开发者把当前的需求清晰明了的用代码来实现掉,为此，接口文档的作用也能最大化.</p>

<p>那么,在swagger的标准中,那些允许我们自定义扩展,在Springfox中我们又如何来实现我们的自定义扩展呢?</p>

<h2 id="swagger标准"><span class="me-2">Swagger标准</span><a href="#swagger标准" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>先来看Swagger定义的几个标准属性,可参考<a href="https://swagger.io/specification/v2/">官方文档</a></p>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>swagger</th>
      <th><code class="language-plaintext highlighter-rouge">string</code></th>
      <th><strong>Required.</strong> Specifies the Swagger Specification version being used. It can be used by the Swagger UI and other clients to interpret the API listing. The value MUST be <code class="language-plaintext highlighter-rouge">"2.0"</code>.</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>info</td>
      <td><a href="https://swagger.io/specification/v2/#infoObject">Info Object</a></td>
      <td><strong>Required.</strong> Provides metadata about the API. The metadata can be used by the clients if needed.</td>
    </tr>
    <tr>
      <td>host</td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>The host (name or ip) serving the API. This MUST be the host only and does not include the scheme nor sub-paths. It MAY include a port. If the <code class="language-plaintext highlighter-rouge">host</code> is not included, the host serving the documentation is to be used (including the port). The <code class="language-plaintext highlighter-rouge">host</code> does not support <a href="https://swagger.io/specification/v2/#pathTemplating">path templating</a>.</td>
    </tr>
    <tr>
      <td>basePath</td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>The base path on which the API is served, which is relative to the <a href="https://swagger.io/specification/v2/#swaggerHost"><code class="language-plaintext highlighter-rouge">host</code></a>. If it is not included, the API is served directly under the <code class="language-plaintext highlighter-rouge">host</code>. The value MUST start with a leading slash (<code class="language-plaintext highlighter-rouge">/</code>). The <code class="language-plaintext highlighter-rouge">basePath</code> does not support <a href="https://swagger.io/specification/v2/#pathTemplating">path templating</a>.</td>
    </tr>
    <tr>
      <td>schemes</td>
      <td>[<code class="language-plaintext highlighter-rouge">string</code>]</td>
      <td>The transfer protocol of the API. Values MUST be from the list: <code class="language-plaintext highlighter-rouge">"http"</code>, <code class="language-plaintext highlighter-rouge">"https"</code>, <code class="language-plaintext highlighter-rouge">"ws"</code>, <code class="language-plaintext highlighter-rouge">"wss"</code>. If the <code class="language-plaintext highlighter-rouge">schemes</code> is not included, the default scheme to be used is the one used to access the Swagger definition itself.</td>
    </tr>
    <tr>
      <td>consumes</td>
      <td>[<code class="language-plaintext highlighter-rouge">string</code>]</td>
      <td>A list of MIME types the APIs can consume. This is global to all APIs but can be overridden on specific API calls. Value MUST be as described under <a href="https://swagger.io/specification/v2/#mimeTypes">Mime Types</a>.</td>
    </tr>
    <tr>
      <td>produces</td>
      <td>[<code class="language-plaintext highlighter-rouge">string</code>]</td>
      <td>A list of MIME types the APIs can produce. This is global to all APIs but can be overridden on specific API calls. Value MUST be as described under <a href="https://swagger.io/specification/v2/#mimeTypes">Mime Types</a>.</td>
    </tr>
    <tr>
      <td>paths</td>
      <td><a href="https://swagger.io/specification/v2/#pathsObject">Paths Object</a></td>
      <td><strong>Required.</strong> The available paths and operations for the API.</td>
    </tr>
    <tr>
      <td>definitions</td>
      <td><a href="https://swagger.io/specification/v2/#definitionsObject">Definitions Object</a></td>
      <td>An object to hold data types produced and consumed by operations.</td>
    </tr>
    <tr>
      <td>parameters</td>
      <td><a href="https://swagger.io/specification/v2/#parametersDefinitionsObject">Parameters Definitions Object</a></td>
      <td>An object to hold parameters that can be used across operations. This property <em>does not</em> define global parameters for all operations.</td>
    </tr>
    <tr>
      <td>responses</td>
      <td><a href="https://swagger.io/specification/v2/#responsesDefinitionsObject">Responses Definitions Object</a></td>
      <td>An object to hold responses that can be used across operations. This property <em>does not</em> define global responses for all operations.</td>
    </tr>
    <tr>
      <td>securityDefinitions</td>
      <td><a href="https://swagger.io/specification/v2/#securityDefinitionsObject">Security Definitions Object</a></td>
      <td>Security scheme definitions that can be used across the specification.</td>
    </tr>
    <tr>
      <td>security</td>
      <td>[<a href="https://swagger.io/specification/v2/#securityRequirementObject">Security Requirement Object</a>]</td>
      <td>A declaration of which security schemes are applied for the API as a whole. The list of values describes alternative security schemes that can be used (that is, there is a logical OR between the security requirements). Individual operations can override this definition.</td>
    </tr>
    <tr>
      <td>tags</td>
      <td>[<a href="https://swagger.io/specification/v2/#tagObject">Tag Object</a>]</td>
      <td>A list of tags used by the specification with additional metadata. The order of the tags can be used to reflect on their order by the parsing tools. Not all tags that are used by the <a href="https://swagger.io/specification/v2/#operationObject">Operation Object</a>must be declared. The tags that are not declared may be organized randomly or based on the tools’ logic. Each tag name in the list MUST be unique.</td>
    </tr>
    <tr>
      <td>externalDocs</td>
      <td><a href="https://swagger.io/specification/v2/#externalDocumentationObject">External Documentation Object</a></td>
      <td>Additional external documentation.</td>
    </tr>
  </tbody>
</table></div>

<p>在上面定义的标准字段中,最后一个是扩展对象,我们在Java对象中<code class="language-plaintext highlighter-rouge">io.swagger.models.Swagger</code>中可以看到他的定义</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Swagger</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="nc">String</span> <span class="n">swagger</span> <span class="o">=</span> <span class="s">"2.0"</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">Info</span> <span class="n">info</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">String</span> <span class="n">host</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">String</span> <span class="n">basePath</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Tag</span><span class="o">&gt;</span> <span class="n">tags</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Scheme</span><span class="o">&gt;</span> <span class="n">schemes</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">consumes</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">produces</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">SecurityRequirement</span><span class="o">&gt;</span> <span class="n">security</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Path</span><span class="o">&gt;</span> <span class="n">paths</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">SecuritySchemeDefinition</span><span class="o">&gt;</span> <span class="n">securityDefinitions</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Model</span><span class="o">&gt;</span> <span class="n">definitions</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Parameter</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Response</span><span class="o">&gt;</span> <span class="n">responses</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">ExternalDocs</span> <span class="n">externalDocs</span><span class="o">;</span>
    <span class="c1">//扩展属性</span>
    <span class="kd">protected</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">vendorExtensions</span><span class="o">;</span>
    <span class="c1">//setter and getter</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>所以从上面的接口定义来看,我们最终可以来一一查看Swagger支持哪些对象进行自定义扩展属性</p>

<h3 id="swagger根对象扩展"><span class="me-2">Swagger根对象扩展</span><a href="#swagger根对象扩展" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>在Swagger的根对象中,我们看到他是有<code class="language-plaintext highlighter-rouge">vendorExtensions</code>扩展属性的支持的，是一个散列的数据结构类型，这意味着我们可以在Swagger的根对象中添加多个扩展属性</p>

<p>扩展属性名称的规则必须是以<code class="language-plaintext highlighter-rouge">x-</code>来开头，所有的都是这个规则</p>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>Field Pattern</th>
      <th style="text-align: center">Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>^x-</td>
      <td style="text-align: center">Any</td>
      <td>Allows extensions to the Swagger Schema. The field name MUST begin with <code class="language-plaintext highlighter-rouge">x-</code>, for example, <code class="language-plaintext highlighter-rouge">x-internal-id</code>. The value can be <code class="language-plaintext highlighter-rouge">null</code>, a primitive, an array or an object. See <a href="https://swagger.io/specification/v2/#vendorExtensions">Vendor Extensions</a> for further details.</td>
    </tr>
  </tbody>
</table></div>

<p>看到此处,以前在swagger-bootstrap-ui的1.8.5版本中添加的扩展属性都是不规范的,因为没有应用swagger的标准规则，在后期的版本中要重写该规则实现</p>

<p>所以,我们在Swagger根路径扩展的规则最终生成的JSON格式可能是这样：</p>

<div class="language-json highlighter-rouge"><div class="code-header">
        <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"swagger"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;div style='font-size:14px;color:red;'&gt;swagger-bootstrap-ui-demo RESTful APIs&lt;/div&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"swagger-bootstrap-ui很棒~~~！！！"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"termsOfService"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.group.com/"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"contact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"group@qq.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1:8999"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"basePath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.8.2版本"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Api 182 Controller"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"/2/api/new187/postRequest"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"post"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"api-1871-controller"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"版本2-post请求参数Hidden属性是否生效"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"operationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postRequestUsingPOST_1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"consumes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"application/json"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"produces"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"*/*"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"body"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"model187"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"model187"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"schema"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"originalRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Model187"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"$ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#/definitions/Model187"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"responses"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"200"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"schema"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"originalRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Rest«Model187»"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"$ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#/definitions/Rest«Model187»"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"201"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Created"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"401"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unauthorized"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"403"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Forbidden"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"404"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Not Found"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"security"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"BearerToken"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="s2">"global"</span><span class="w">
                        </span><span class="p">]</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"BearerToken1"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="s2">"global"</span><span class="w">
                        </span><span class="p">]</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"deprecated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"securityDefinitions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"BearerToken"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apiKey"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Authorization"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"header"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"definitions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"AInfoVo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"aId"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"bList"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"aId"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A记录主键"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"bList"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"B信息Map, key为BInfoVo的主键pkId"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"additionalProperties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"originalRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BInfoVo"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"$ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#/definitions/BInfoVo"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AInfoVo"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A信息"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"ActInteger"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"doub1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"double"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"double类型属性"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"float1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"float"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"float类型属性"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"integer"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int64"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Long类型"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BigDecimal类型属性"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"sort"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"integer"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int32"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int类型"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ActInteger"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"Actor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"deepOne"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"originalRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DeepOne"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"$ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#/definitions/DeepOne"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"recipt"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"originalRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Recipt"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"$ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#/definitions/Recipt"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"sort"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"integer"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int32"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Actor"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"x-description"</span><span class="p">:</span><span class="s2">"Swagger扩展属性之一Description"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></div></div>

<p><code class="language-plaintext highlighter-rouge">x-description</code>属性就是我们扩展的标准的扩展属性，我们在Java代码中也可以这么来实现：</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nc">Swagger</span> <span class="n">swagger</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">mapDocumentation</span><span class="o">(</span><span class="n">documentation</span><span class="o">);</span>
<span class="n">swagger</span><span class="o">.</span><span class="na">setVendorExtension</span><span class="o">(</span><span class="s">"x-description"</span><span class="o">,</span><span class="s">"Swagger扩展属性之一Description"</span><span class="o">);</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="path接口扩展"><span class="me-2">path接口扩展</span><a href="#path接口扩展" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>同上面的规则,path中定义的属性，我们同样可以扩展我们的规则,此时我们的需求,根据接口来排序就可以通过path增加扩展属性来实现,比如我们给path添加一个扩展属性<code class="language-plaintext highlighter-rouge">x-order</code></p>

<p>path的JSON结构就可能如下：</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
</pre></td><td class="rouge-code"><pre><span class="s">"/2/api/new187/postRequest"</span><span class="o">:</span> <span class="o">{</span>
    <span class="s">"post"</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">"tags"</span><span class="o">:</span> <span class="o">[</span>
            <span class="s">"api-1871-controller"</span>
        <span class="o">],</span>
        <span class="s">"summary"</span><span class="o">:</span> <span class="s">"版本2-post请求参数Hidden属性是否生效"</span><span class="o">,</span>
        <span class="s">"operationId"</span><span class="o">:</span> <span class="s">"postRequestUsingPOST_1"</span><span class="o">,</span>
        <span class="s">"consumes"</span><span class="o">:</span> <span class="o">[</span>
            <span class="s">"application/json"</span>
        <span class="o">],</span>
        <span class="s">"produces"</span><span class="o">:</span> <span class="o">[</span>
            <span class="s">"*/*"</span>
        <span class="o">],</span>
        <span class="s">"parameters"</span><span class="o">:</span> <span class="o">[</span>
            <span class="o">{</span>
                <span class="s">"in"</span><span class="o">:</span> <span class="s">"body"</span><span class="o">,</span>
                <span class="s">"name"</span><span class="o">:</span> <span class="s">"model187"</span><span class="o">,</span>
                <span class="s">"description"</span><span class="o">:</span> <span class="s">"model187"</span><span class="o">,</span>
                <span class="s">"required"</span><span class="o">:</span> <span class="kc">true</span><span class="o">,</span>
                <span class="s">"schema"</span><span class="o">:</span> <span class="o">{</span>
                    <span class="s">"originalRef"</span><span class="o">:</span> <span class="s">"Model187"</span><span class="o">,</span>
                    <span class="s">"$ref"</span><span class="o">:</span> <span class="s">"#/definitions/Model187"</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">],</span>
        <span class="s">"responses"</span><span class="o">:</span> <span class="o">{</span>
            <span class="s">"200"</span><span class="o">:</span> <span class="o">{</span>
                <span class="s">"description"</span><span class="o">:</span> <span class="s">"OK"</span><span class="o">,</span>
                <span class="s">"schema"</span><span class="o">:</span> <span class="o">{</span>
                    <span class="s">"originalRef"</span><span class="o">:</span> <span class="s">"Rest«Model187»"</span><span class="o">,</span>
                    <span class="s">"$ref"</span><span class="o">:</span> <span class="s">"#/definitions/Rest«Model187»"</span>
                <span class="o">}</span>
            <span class="o">},</span>
            <span class="s">"201"</span><span class="o">:</span> <span class="o">{</span>
                <span class="s">"description"</span><span class="o">:</span> <span class="s">"Created"</span>
            <span class="o">},</span>
            <span class="s">"401"</span><span class="o">:</span> <span class="o">{</span>
                <span class="s">"description"</span><span class="o">:</span> <span class="s">"Unauthorized"</span>
            <span class="o">},</span>
            <span class="s">"403"</span><span class="o">:</span> <span class="o">{</span>
                <span class="s">"description"</span><span class="o">:</span> <span class="s">"Forbidden"</span>
            <span class="o">},</span>
            <span class="s">"404"</span><span class="o">:</span> <span class="o">{</span>
                <span class="s">"description"</span><span class="o">:</span> <span class="s">"Not Found"</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="s">"security"</span><span class="o">:</span> <span class="o">[</span>
            <span class="o">{</span>
                <span class="s">"BearerToken"</span><span class="o">:</span> <span class="o">[</span>
                    <span class="s">"global"</span>
                <span class="o">]</span>
            <span class="o">},</span>
            <span class="o">{</span>
                <span class="s">"BearerToken1"</span><span class="o">:</span> <span class="o">[</span>
                    <span class="s">"global"</span>
                <span class="o">]</span>
            <span class="o">}</span>
        <span class="o">],</span>
        <span class="s">"deprecated"</span><span class="o">:</span> <span class="kc">false</span><span class="o">,</span>
        <span class="s">"x-order"</span><span class="o">:</span><span class="s">"1"</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="more"><span class="me-2">more</span><a href="#more" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>swagger在Open API的规范文档中声明的是任意对象都可以有对象扩展,只要符合扩展规则即可(即扩展属性名称以<code class="language-plaintext highlighter-rouge">x-</code>开头)</p>

<h2 id="springfox实现"><span class="me-2">Springfox实现</span><a href="#springfox实现" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>我们知道了扩展规则的定义,那么在Springfox中我们如何自定义实现呢?</p>

<p>在前面的文章中,我们介绍了springfox使用了Spring Plugin系统来增强整个框架的可扩展性,我想此时的你应该能明白了，如果要扩展path接口的属性,那么，其实我们只需要找到Springfox提供的Plugin接口，然后增加一个Plugin的接口实现，把我们的扩展属性增加进去即可</p>

<p>接下来,我们实现上面path接口的自定义<code class="language-plaintext highlighter-rouge">x-order</code>的属性扩展实现.</p>

<p>我们先来看Springfox将自己的Documentation对象转换为Swagger标准对象的代码</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td><td class="rouge-code"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="nc">Swagger</span> <span class="nf">mapDocumentation</span><span class="o">(</span><span class="nc">Documentation</span> <span class="n">from</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">from</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nc">Swagger</span> <span class="n">swagger</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Swagger</span><span class="o">();</span>

    <span class="n">swagger</span><span class="o">.</span><span class="na">setVendorExtensions</span><span class="o">(</span> <span class="n">vendorExtensionsMapper</span><span class="o">.</span><span class="na">mapExtensions</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getVendorExtensions</span><span class="o">()</span> <span class="o">)</span> <span class="o">);</span>
    <span class="n">swagger</span><span class="o">.</span><span class="na">setSchemes</span><span class="o">(</span> <span class="n">mapSchemes</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getSchemes</span><span class="o">()</span> <span class="o">)</span> <span class="o">);</span>
    <span class="c1">//path转换</span>
    <span class="n">swagger</span><span class="o">.</span><span class="na">setPaths</span><span class="o">(</span> <span class="n">mapApiListings</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getApiListings</span><span class="o">()</span> <span class="o">)</span> <span class="o">);</span>
    <span class="n">swagger</span><span class="o">.</span><span class="na">setHost</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getHost</span><span class="o">()</span> <span class="o">);</span>
    <span class="n">swagger</span><span class="o">.</span><span class="na">setDefinitions</span><span class="o">(</span> <span class="n">modelMapper</span><span class="o">.</span><span class="na">modelsFromApiListings</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getApiListings</span><span class="o">()</span> <span class="o">)</span> <span class="o">);</span>
    <span class="n">swagger</span><span class="o">.</span><span class="na">setSecurityDefinitions</span><span class="o">(</span> <span class="n">securityMapper</span><span class="o">.</span><span class="na">toSecuritySchemeDefinitions</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getResourceListing</span><span class="o">()</span> <span class="o">)</span> <span class="o">);</span>
    <span class="nc">ApiInfo</span> <span class="n">info</span> <span class="o">=</span> <span class="n">fromResourceListingInfo</span><span class="o">(</span> <span class="n">from</span> <span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">info</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
        <span class="n">swagger</span><span class="o">.</span><span class="na">setInfo</span><span class="o">(</span> <span class="n">mapApiInfo</span><span class="o">(</span> <span class="n">info</span> <span class="o">)</span> <span class="o">);</span>
    <span class="o">}</span>
    <span class="n">swagger</span><span class="o">.</span><span class="na">setBasePath</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getBasePath</span><span class="o">()</span> <span class="o">);</span>
    <span class="n">swagger</span><span class="o">.</span><span class="na">setTags</span><span class="o">(</span> <span class="n">tagSetToTagList</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getTags</span><span class="o">()</span> <span class="o">)</span> <span class="o">);</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">list2</span> <span class="o">=</span> <span class="n">from</span><span class="o">.</span><span class="na">getConsumes</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">list2</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
        <span class="n">swagger</span><span class="o">.</span><span class="na">setConsumes</span><span class="o">(</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;(</span> <span class="n">list2</span> <span class="o">)</span> <span class="o">);</span>
    <span class="o">}</span>
    <span class="k">else</span> <span class="o">{</span>
        <span class="n">swagger</span><span class="o">.</span><span class="na">setConsumes</span><span class="o">(</span> <span class="kc">null</span> <span class="o">);</span>
    <span class="o">}</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">list3</span> <span class="o">=</span> <span class="n">from</span><span class="o">.</span><span class="na">getProduces</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">list3</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
        <span class="n">swagger</span><span class="o">.</span><span class="na">setProduces</span><span class="o">(</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;(</span> <span class="n">list3</span> <span class="o">)</span> <span class="o">);</span>
    <span class="o">}</span>
    <span class="k">else</span> <span class="o">{</span>
        <span class="n">swagger</span><span class="o">.</span><span class="na">setProduces</span><span class="o">(</span> <span class="kc">null</span> <span class="o">);</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="n">swagger</span><span class="o">;</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>既然我们的目标是path,那么来看<code class="language-plaintext highlighter-rouge">mapApiListings</code>方法</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="kd">protected</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Path</span><span class="o">&gt;</span> <span class="nf">mapApiListings</span><span class="o">(</span><span class="nc">Multimap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">ApiListing</span><span class="o">&gt;</span> <span class="n">apiListings</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Path</span><span class="o">&gt;</span> <span class="n">paths</span> <span class="o">=</span> <span class="n">newTreeMap</span><span class="o">();</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">ApiListing</span> <span class="n">each</span> <span class="o">:</span> <span class="n">apiListings</span><span class="o">.</span><span class="na">values</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">for</span> <span class="o">(</span><span class="nc">ApiDescription</span> <span class="n">api</span> <span class="o">:</span> <span class="n">each</span><span class="o">.</span><span class="na">getApis</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">paths</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">api</span><span class="o">.</span><span class="na">getPath</span><span class="o">(),</span> <span class="n">mapOperations</span><span class="o">(</span><span class="n">api</span><span class="o">,</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">fromNullable</span><span class="o">(</span><span class="n">paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">api</span><span class="o">.</span><span class="na">getPath</span><span class="o">()))));</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">paths</span><span class="o">;</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>程序的逻辑是：</p>

<ul>
  <li>声明一个map数组,key是接口路径,value是path对象</li>
  <li>遍历springfox中的ApiListing集合对象(类似于controller)</li>
  <li>遍历ApiDescription结合对象（类似于接口method）</li>
  <li>最终拿到apiDescription的接口地址,将operation对象转换为path</li>
</ul>

<p>继续来看<code class="language-plaintext highlighter-rouge">mapOperations</code>方法</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="kd">private</span> <span class="nc">Path</span> <span class="nf">mapOperations</span><span class="o">(</span><span class="nc">ApiDescription</span> <span class="n">api</span><span class="o">,</span> <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Path</span><span class="o">&gt;</span> <span class="n">existingPath</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Path</span> <span class="n">path</span> <span class="o">=</span> <span class="n">existingPath</span><span class="o">.</span><span class="na">or</span><span class="o">(</span><span class="k">new</span> <span class="nc">Path</span><span class="o">());</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">springfox</span><span class="o">.</span><span class="na">documentation</span><span class="o">.</span><span class="na">service</span><span class="o">.</span><span class="na">Operation</span> <span class="n">each</span> <span class="o">:</span> <span class="n">nullToEmptyList</span><span class="o">(</span><span class="n">api</span><span class="o">.</span><span class="na">getOperations</span><span class="o">()))</span> <span class="o">{</span>
      <span class="nc">Operation</span> <span class="n">operation</span> <span class="o">=</span> <span class="n">mapOperation</span><span class="o">(</span><span class="n">each</span><span class="o">);</span>
      <span class="n">path</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">each</span><span class="o">.</span><span class="na">getMethod</span><span class="o">().</span><span class="na">toString</span><span class="o">().</span><span class="na">toLowerCase</span><span class="o">(),</span> <span class="n">operation</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">path</span><span class="o">;</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<div class="table-wrapper"><table>
  <tbody>
    <tr>
      <td>循环遍历所有的Operation,此处为什么有循环,因为我们同一个接口允许存在不同的请求方式(GET</td>
      <td>POST</td>
      <td>PUT</td>
      <td>DELETE…),但是请求体可以相同</td>
    </tr>
  </tbody>
</table></div>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="n">io</span><span class="o">.</span><span class="na">swagger</span><span class="o">.</span><span class="na">models</span><span class="o">.</span><span class="na">Operation</span> <span class="nf">mapOperation</span><span class="o">(</span><span class="nc">Operation</span> <span class="n">from</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">from</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="n">io</span><span class="o">.</span><span class="na">swagger</span><span class="o">.</span><span class="na">models</span><span class="o">.</span><span class="na">Operation</span> <span class="n">operation</span> <span class="o">=</span> <span class="k">new</span> <span class="n">io</span><span class="o">.</span><span class="na">swagger</span><span class="o">.</span><span class="na">models</span><span class="o">.</span><span class="na">Operation</span><span class="o">();</span>

    <span class="n">operation</span><span class="o">.</span><span class="na">setSecurity</span><span class="o">(</span> <span class="n">mapAuthorizations</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getSecurityReferences</span><span class="o">()</span> <span class="o">)</span> <span class="o">);</span>
    <span class="n">operation</span><span class="o">.</span><span class="na">setVendorExtensions</span><span class="o">(</span> <span class="n">vendorExtensionsMapper</span><span class="o">.</span><span class="na">mapExtensions</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getVendorExtensions</span><span class="o">()</span> <span class="o">)</span> <span class="o">);</span>
</pre></td></tr></tbody></table></code></div></div>

<p>看到<code class="language-plaintext highlighter-rouge">mapOperation</code>方法时,我们终于看到了setVendorExtensions的操作,即赋值扩展属性</p>

<p>那么来看扩展属性是如何来实现的</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="nd">@Mapper</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">VendorExtensionsMapper</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">mapExtensions</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">VendorExtension</span><span class="o">&gt;</span> <span class="n">from</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">extensions</span> <span class="o">=</span> <span class="n">newTreeMap</span><span class="o">();</span>
    <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">ListVendorExtension</span><span class="o">&gt;</span> <span class="n">listExtensions</span> <span class="o">=</span> <span class="n">from</span><span class="o">(</span><span class="n">from</span><span class="o">)</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="nc">ListVendorExtension</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">ListVendorExtension</span> <span class="n">each</span> <span class="o">:</span> <span class="n">listExtensions</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">extensions</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">each</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">each</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
    <span class="o">}</span>
    <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;&gt;</span> <span class="n">objectExtensions</span> <span class="o">=</span> <span class="n">from</span><span class="o">(</span><span class="n">from</span><span class="o">)</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="nc">ObjectVendorExtension</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
        <span class="o">.</span><span class="na">transform</span><span class="o">(</span><span class="n">toExtensionMap</span><span class="o">());</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">each</span> <span class="o">:</span> <span class="n">objectExtensions</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">extensions</span><span class="o">.</span><span class="na">putAll</span><span class="o">(</span><span class="n">each</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">StringVendorExtension</span><span class="o">&gt;</span> <span class="n">propertyExtensions</span> <span class="o">=</span> <span class="n">from</span><span class="o">(</span><span class="n">from</span><span class="o">)</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="nc">StringVendorExtension</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">StringVendorExtension</span> <span class="n">each</span> <span class="o">:</span> <span class="n">propertyExtensions</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">extensions</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">each</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">each</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">extensions</span><span class="o">;</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>通过<code class="language-plaintext highlighter-rouge">VendorExtensionsMapper</code>中的扩展属性方法,我们看到,springfox目前做了限制,因为<code class="language-plaintext highlighter-rouge">VendorExtension</code>是接口,我们可以有我们自己的定义实现,但是springfox最终会对扩展接口进行filter过滤,从代码中我们看到,springfox目前只允许三种扩展实现</p>

<p>分别是：</p>

<ul>
  <li>ListVendorExtension:列表的形式,该对象支持泛型，最终形式：”x-field”:[{field:value}]</li>
  <li>ObjectVendorExtension:对象的扩展形式,最终的扩展形式是：”x-field”:[{field:value}]</li>
  <li>StringVendorExtension:string类型的扩展实现，最终的扩展形式是”x-field”:”value”</li>
</ul>

<p>既然springfox给我们提供了默认的三种扩展实现,那么针对上面的我们需要扩展path的扩展属性,我们使用<code class="language-plaintext highlighter-rouge">StringVendorExtension:string</code>这种类型即可</p>

<p>针对path的operation操作，我们在前面也介绍过,springfox最终使用的是<code class="language-plaintext highlighter-rouge">OperationBuilderPlugin</code>接口</p>

<p>那么我们只需要写一个<code class="language-plaintext highlighter-rouge">OperationBuilderPlugin</code>Plugin接口的实现即可</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="nd">@Component</span>
<span class="nd">@Order</span><span class="o">(</span><span class="nc">Ordered</span><span class="o">.</span><span class="na">HIGHEST_PRECEDENCE</span><span class="o">+</span><span class="mi">100</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OperationPositionBulderPlugin</span> <span class="kd">implements</span> <span class="nc">OperationBuilderPlugin</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">OperationContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">context</span><span class="o">.</span><span class="na">operationBuilder</span><span class="o">().</span><span class="na">extensions</span><span class="o">(</span><span class="nc">Lists</span><span class="o">.</span><span class="na">newArrayList</span><span class="o">(</span><span class="k">new</span> <span class="nc">StringVendorExtension</span><span class="o">(</span><span class="s">"x-order"</span><span class="o">,</span><span class="s">"1"</span><span class="o">)));</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supports</span><span class="o">(</span><span class="nc">DocumentationType</span> <span class="n">delimiter</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>目前假设我们给所有的接口都赋予扩展属性<code class="language-plaintext highlighter-rouge">x-order</code>,默认值为”1”</p>

<p>此时,我们来看/v2/api-docs接口响应的JSON示例</p>

<p><a href="/images/springfox/springfox-19-extensions.png" class="popup img-link  shimmer"><img src="/images/springfox/springfox-19-extensions.png" alt="" loading="lazy"></a></p>

<p>上图中,我们其实可以看到我们的自定义扩展属性实现了</p>

<p>然后我们在结合我们自定义的swagger-bootstrap-ui前端UI渲染程序,把order字段作为path接口的排序字段，在页面进行排序显示,这样我们就实现了我们的接口自定义排序规则了</p>

<p>有可能细心的朋友会问,我们给的order值都是1,如果给与开发者在代码中给接口自定义的值呢</p>

<p>此时，有两种方式</p>

<ul>
  <li>基于swagger-bootstrap-ui提供的注解<code class="language-plaintext highlighter-rouge">@ApiOperationSort</code>进行获取</li>
  <li>基于swagger的默认注解<code class="language-plaintext highlighter-rouge">@ApiOperation</code>中的postion属性进行二次利用</li>
</ul>

<p>此时,我们的接口代码可能会如下：</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/createOr33der"</span><span class="o">)</span>
<span class="nd">@ApiOperation</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"创建订单"</span><span class="o">,</span><span class="n">position</span> <span class="o">=</span> <span class="mi">2</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">Rest</span><span class="o">&lt;</span><span class="nc">Order</span><span class="o">&gt;</span> <span class="nf">createOrdetr</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">Order</span> <span class="n">order</span><span class="o">,</span><span class="nc">HttpSession</span> <span class="n">httpSession</span><span class="o">){</span>
    <span class="nc">Rest</span><span class="o">&lt;</span><span class="nc">Order</span><span class="o">&gt;</span> <span class="n">r</span><span class="o">=</span><span class="k">new</span> <span class="nc">Rest</span><span class="o">&lt;&gt;();</span>
    <span class="n">r</span><span class="o">.</span><span class="na">setData</span><span class="o">(</span><span class="n">order</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">r</span><span class="o">;</span>
<span class="o">}</span>

<span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/createOrder"</span><span class="o">)</span>
<span class="nd">@ApiOperationSort</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
<span class="nd">@ApiOperation</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"hash测试"</span><span class="o">,</span><span class="n">nickname</span> <span class="o">=</span> <span class="s">"test"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">Rest</span><span class="o">&lt;</span><span class="nc">Order</span><span class="o">&gt;</span> <span class="nf">createOrder</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">Order</span> <span class="n">order</span><span class="o">){</span>
    <span class="nc">Rest</span><span class="o">&lt;</span><span class="nc">Order</span><span class="o">&gt;</span> <span class="n">r</span><span class="o">=</span><span class="k">new</span> <span class="nc">Rest</span><span class="o">&lt;&gt;();</span>
    <span class="n">r</span><span class="o">.</span><span class="na">setData</span><span class="o">(</span><span class="n">order</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">r</span><span class="o">;</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>两种方式,取第一种即可</p>

<p>这时,我们更改一下上面我们的Plugin接口实现</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="rouge-code"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">OperationContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">position</span><span class="o">=</span><span class="nc">Integer</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">;</span>
    <span class="c1">//首先查找ApiOperation注解</span>
    <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">ApiOperation</span><span class="o">&gt;</span> <span class="n">api</span><span class="o">=</span><span class="n">context</span><span class="o">.</span><span class="na">findAnnotation</span><span class="o">(</span><span class="nc">ApiOperation</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">api</span><span class="o">.</span><span class="na">isPresent</span><span class="o">()){</span>
        <span class="c1">//判断postion是否有值</span>
        <span class="kt">int</span> <span class="n">posit</span><span class="o">=</span><span class="n">api</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">position</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">posit</span><span class="o">!=</span><span class="mi">0</span><span class="o">){</span>
            <span class="n">position</span><span class="o">=</span><span class="n">posit</span><span class="o">;</span>
        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
            <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">ApiOperationSort</span><span class="o">&gt;</span> <span class="n">apiOperationSortOptional</span><span class="o">=</span><span class="n">context</span><span class="o">.</span><span class="na">findAnnotation</span><span class="o">(</span><span class="nc">ApiOperationSort</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">apiOperationSortOptional</span><span class="o">.</span><span class="na">isPresent</span><span class="o">()){</span>
                <span class="n">position</span><span class="o">=</span><span class="n">apiOperationSortOptional</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">value</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span><span class="k">else</span><span class="o">{</span>
        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">ApiOperationSort</span><span class="o">&gt;</span> <span class="n">apiOperationSortOptional</span><span class="o">=</span><span class="n">context</span><span class="o">.</span><span class="na">findAnnotation</span><span class="o">(</span><span class="nc">ApiOperationSort</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">apiOperationSortOptional</span><span class="o">.</span><span class="na">isPresent</span><span class="o">()){</span>
            <span class="n">position</span><span class="o">=</span><span class="n">apiOperationSortOptional</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">value</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="n">context</span><span class="o">.</span><span class="na">operationBuilder</span><span class="o">().</span><span class="na">extensions</span><span class="o">(</span><span class="nc">Lists</span><span class="o">.</span><span class="na">newArrayList</span><span class="o">(</span><span class="k">new</span> <span class="nc">StringVendorExtension</span><span class="o">(</span><span class="s">"x-order"</span><span class="o">,</span><span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">position</span><span class="o">))));</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>此时,我们再来看JSON效果</p>

<p><a href="/images/springfox/springfox-19-extensions1.png" class="popup img-link  shimmer"><img src="/images/springfox/springfox-19-extensions1.png" alt="" loading="lazy"></a></p>

<p>此时,我们看到，我们的自定义属性已经出现了,而且是根据开发者自定义的实现,此时我们的目的也达到了.</p>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
    <div class="post-meta mb-3">
      <i class="far fa-folder-open fa-fw me-1"></i>
      
      <a href="/categories/springfox/">springfox</a>
    </div>
    

    <!-- tags -->
    

    <div class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      ">
      <div class="license-wrapper">
        
        

        本文由作者按照 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         进行授权
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted me-1">分享</span>
  <span class="share-icons">
    
    
    

    
      
      <a
        href="https://twitter.com/intent/tweet?text=springfox%20%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90(%E5%8D%81%E4%B8%89)%20%E8%87%AA%E5%AE%9A%E4%B9%89%E6%89%A9%E5%B1%95%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E7%9A%84%E6%8E%92%E5%BA%8F%20-%20%E5%85%AB%E4%B8%80%E8%8F%9C%E5%88%80&url=%2Fposts%2Fspringfox-13%2F"
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Twitter"
        target="_blank"
        rel="noopener"
        aria-label="Twitter"
      >
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    
      
      <a
        href="https://www.facebook.com/sharer/sharer.php?title=springfox%20%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90(%E5%8D%81%E4%B8%89)%20%E8%87%AA%E5%AE%9A%E4%B9%89%E6%89%A9%E5%B1%95%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E7%9A%84%E6%8E%92%E5%BA%8F%20-%20%E5%85%AB%E4%B8%80%E8%8F%9C%E5%88%80&u=%2Fposts%2Fspringfox-13%2F"
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Facebook"
        target="_blank"
        rel="noopener"
        aria-label="Facebook"
      >
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    
      
      <a
        href="https://t.me/share/url?url=%2Fposts%2Fspringfox-13%2F&text=springfox%20%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90(%E5%8D%81%E4%B8%89)%20%E8%87%AA%E5%AE%9A%E4%B9%89%E6%89%A9%E5%B1%95%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E7%9A%84%E6%8E%92%E5%BA%8F%20-%20%E5%85%AB%E4%B8%80%E8%8F%9C%E5%88%80"
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Telegram"
        target="_blank"
        rel="noopener"
        aria-label="Telegram"
      >
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="分享链接"
      data-title-succeed="链接已复制！"
    >
      <i class="fa-fw fas fa-link pe-none"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>

            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted">
            <div class="access">
              <!-- Get the last 5 posts from lastmod list. -->

<div class="xiaoym-qrcode">
  <div class="xiaoym-qrcode-title">
    <h2>微信公众号(八一菜刀)</h2>
  </div>
  <div style="text-align: center;"><img src="/images/website/mp/qrcode.jpg" /> </div>
</div>














<section id="access-lastmod">
  <h2 class="panel-heading">最近更新</h2>
  <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
    
    
    
    
    <li class="text-truncate lh-lg">
      <a href="/posts/llm-start/">全面进击AI大模型、RAG领域</a>
    </li>
    
    
    
    
    <li class="text-truncate lh-lg">
      <a href="/posts/rag-inaction-java/">实战0-1,Java开发者也能看懂的大模型应用RAG开发实践</a>
    </li>
    
    
    
    
    <li class="text-truncate lh-lg">
      <a href="/posts/use-prompt-framework/">用好大模型?这5种实用的Prompt框架你一定要看看!</a>
    </li>
    
    
    
    
    <li class="text-truncate lh-lg">
      <a href="/posts/knife4j-insight-mvp/">Knife4jInsight平台版-MVP版本v1.0.0发布</a>
    </li>
    
    
    
    
    <li class="text-truncate lh-lg">
      <a href="/posts/spring-boot-conditional/">Spring Boot框架中如何优雅的注入实体Bean</a>
    </li>
    
  </ul>
</section>
<!-- #access-lastmod -->

              <!-- The trending tags list -->















  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">热门标签</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/llm/">LLM</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/rag/">RAG</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/rag%E5%AE%9E%E6%88%98/">RAG实战</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%AE%9E%E6%88%98/">大模型实战</a>
      
    </div>
  </section>


            </div>

            
              
              



  <section id="toc-wrapper" class="ps-0 pe-4">
    <h2 class="panel-heading ps-3 pt-2 mb-2">文章内容</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->














  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">相关文章</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/springfox-14/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1559145600"
  data-df="YYYY/MM/DD"
  
>
  2019/05/30
</time>

              <h4 class="pt-0 my-2">springfox 源码分析(十四) 归档得到ApiListing接口集合</h4>
              <div class="text-muted">
                <p>
                  





                  在前面我们拿到了接口的Model类型集合,然后还获取到了该接口的ApiDescription描述信息

此时针对这些信息,进行接口的资源整合,最终构造ApiListing类

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
4...
                </p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/springfox-15/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1559232000"
  data-df="YYYY/MM/DD"
  
>
  2019/05/31
</time>

              <h4 class="pt-0 my-2">springfox 源码分析(十五) 归档得到Documentation文档对象</h4>
              <div class="text-muted">
                <p>
                  





                  通过上篇的分析,我们已经得到了ApiListing的map集合，接下来最终做文档归档,得到Documentation对象

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
/***
   * 最终生成Documentation...
                </p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/springfox-16/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1559318400"
  data-df="YYYY/MM/DD"
  
>
  2019/06/01
</time>

              <h4 class="pt-0 my-2">springfox 源码分析(十六) 分组接口swagger-resouces</h4>
              <div class="text-muted">
                <p>
                  





                  通过前面的分析,我们最终得到了springfox的Documentation文档对象,将我们的RESTful接口最终转换为了文档对象,文档对象是包含了接口列表、分组信息等属性的

在springfox中,为我们提供了springfox-swagger-ui来呈现最终的接口信息.在ui界面中有两个核心接口：


  swagger-resources:swagger分组接口，创建多少Docke...
                </p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/springfox-12/"
      class="btn btn-outline-primary"
      aria-label="上一篇"
    >
      <p>springfox 源码分析(十二) 遍历接口获取ApiDescription集合</p>
    </a>
  

  
    <a
      href="/posts/springfox-14/"
      class="btn btn-outline-primary"
      aria-label="下一篇"
    >
      <p>springfox 源码分析(十四) 归档得到ApiListing接口集合</p>
    </a>
  
</nav>

            
              
              <!--  The comments switcher -->

  
  <!-- https://giscus.app/ -->
<script type="text/javascript">
  (function () {
    const origin = 'https://giscus.app';
    const iframe = 'iframe.giscus-frame';
    const lightTheme = 'light';
    const darkTheme = 'dark_dimmed';

    let initTheme = lightTheme;
    const html = document.documentElement;

    if (
      (html.hasAttribute('data-mode') &&
        html.getAttribute('data-mode') === 'dark') ||
      (!html.hasAttribute('data-mode') &&
        window.matchMedia('(prefers-color-scheme: dark)').matches)
    ) {
      initTheme = darkTheme;
    }

    let giscusAttributes = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'xiaoymin/xiaoymin.github.io',
      'data-repo-id': 'MDEwOlJlcG9zaXRvcnk3OTUzMjIxNw==',
      'data-category': 'Comments',
      'data-category-id': 'DIC_kwDOBL2Quc4CaKF6',
      'data-mapping': 'pathname',
      'data-reactions-enabled': '1',
      'data-emit-metadata': '0',
      'data-theme': initTheme,
      'data-input-position': 'bottom',
      'data-lang': 'zh-CN',
      'data-loading': 'lazy',
      crossorigin: 'anonymous',
      async: ''
    };

    let giscusScript = document.createElement('script');
    Object.entries(giscusAttributes).forEach(([key, value]) =>
      giscusScript.setAttribute(key, value)
    );
    document.getElementById('tail-wrapper').appendChild(giscusScript);

    addEventListener('message', (event) => {
      if (
        event.source === window &&
        event.data &&
        event.data.direction === ModeToggle.ID
      ) {
        /* global theme mode changed */
        const mode = event.data.message;
        const theme = mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme;

        const message = {
          setConfig: {
            theme: theme
          }
        };

        const giscus = document.querySelector(iframe).contentWindow;
        giscus.postMessage({ giscus: message }, origin);
      }
    });
  })();
</script>



            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>
    ©
    <time>2023</time>
    <a href="https://twitter.com/xiaoymin">xiaoymin</a>.
    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。"
      >保留部分权利。</span>
    
  </p>

  <p>本站采用 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 主题 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a>
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">热门标签</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/llm/">LLM</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/rag/">RAG</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/rag%E5%AE%9E%E6%88%98/">RAG实战</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%AE%9E%E6%88%98/">大模型实战</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">发现新版本的内容。</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      更新
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->

    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/zh.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.21.2/dist/tocbot.min.js"></script>






<script defer src="/assets/js/dist/post.min.js"></script>






    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  /* Note: dependent library will be loaded in `js-selector.html` */
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5"></p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>

  </body>
</html>

