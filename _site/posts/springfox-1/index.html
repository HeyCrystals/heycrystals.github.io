<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="zh-CN" >
  <!-- The Head -->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="stylesheet" href="/assets/css/custom.css">
  <meta name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover">

  

  

  
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="springfox 源码分析(一) 程序入口" />
<meta property="og:locale" content="zh_CN" />
<meta name="description" content="springfox 源码系列" />
<meta property="og:description" content="springfox 源码系列" />
<link rel="canonical" href="/posts/springfox-1/" />
<meta property="og:url" content="/posts/springfox-1/" />
<meta property="og:site_name" content="八一菜刀" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-05-21T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="springfox 源码分析(一) 程序入口" />
<meta name="twitter:site" content="@xiaoymin" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-10-14T16:49:52+08:00","datePublished":"2019-05-21T00:00:00+08:00","description":"springfox 源码系列","headline":"springfox 源码分析(一) 程序入口","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/springfox-1/"},"url":"/posts/springfox-1/"}</script>
<!-- End Jekyll SEO tag -->

  

  <title>springfox 源码分析(一) 程序入口 | 八一菜刀
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">
<link rel="manifest" href="/assets/img/favicons/site.webmanifest">
<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="八一菜刀">
<meta name="application-name" content="八一菜刀">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  
  
  <link rel="preconnect" href="https://fonts.googleapis.com" >
  <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin>
  
  <link rel="preconnect" href="https://fonts.googleapis.com" >
  <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
  
  <link rel="preconnect" href="https://cdn.jsdelivr.net" >
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
  

  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">
  

  <!-- GA -->
  

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css">

  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.2/dist/tocbot.min.css">
  

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
  <!-- Manific Popup -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css">
  

  <!-- JavaScript -->

  
  <!-- Switch the mode between dark and light. -->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() {
      return 'mode';
    }
    static get MODE_ATTR() {
      return 'data-mode';
    }
    static get DARK_MODE() {
      return 'dark';
    }
    static get LIGHT_MODE() {
      return 'light';
    }
    static get ID() {
      return 'mode-toggle';
    }

    constructor() {
      if (this.hasMode) {
        if (this.isDarkMode) {
          if (!this.isSysDarkPrefer) {
            this.setDark();
          }
        } else {
          if (this.isSysDarkPrefer) {
            this.setLight();
          }
        }
      }

      let self = this;

      /* always follow the system prefers */
      this.sysDarkPrefers.addEventListener('change', () => {
        if (self.hasMode) {
          if (self.isDarkMode) {
            if (!self.isSysDarkPrefer) {
              self.setDark();
            }
          } else {
            if (self.isSysDarkPrefer) {
              self.setLight();
            }
          }

          self.clearMode();
        }

        self.notify();
      });
    } /* constructor() */

    get sysDarkPrefers() {
      return window.matchMedia('(prefers-color-scheme: dark)');
    }

    get isSysDarkPrefer() {
      return this.sysDarkPrefers.matches;
    }

    get isDarkMode() {
      return this.mode === ModeToggle.DARK_MODE;
    }

    get isLightMode() {
      return this.mode === ModeToggle.LIGHT_MODE;
    }

    get hasMode() {
      return this.mode != null;
    }

    get mode() {
      return sessionStorage.getItem(ModeToggle.MODE_KEY);
    }

    /* get the current mode on screen */
    get modeStatus() {
      if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) {
        return ModeToggle.DARK_MODE;
      } else {
        return ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      document.documentElement.removeAttribute(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }

    /* Notify another plugins that the theme mode has changed */
    notify() {
      window.postMessage(
        {
          direction: ModeToggle.ID,
          message: this.modeStatus
        },
        '*'
      );
    }

    flipMode() {
      if (this.hasMode) {
        if (this.isSysDarkPrefer) {
          if (this.isLightMode) {
            this.clearMode();
          } else {
            this.setLight();
          }
        } else {
          if (this.isDarkMode) {
            this.clearMode();
          } else {
            this.setDark();
          }
        }
      } else {
        if (this.isSysDarkPrefer) {
          this.setLight();
        } else {
          this.setDark();
        }
      }

      this.notify();
    } /* flipMode() */
  } /* ModeToggle */

  const modeToggle = new ModeToggle();
</script>

  

  <!-- A placeholder to allow defining custom metadata -->

</head>

  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle">
      
        
        <img src="/images/common/avatar.jpeg" width="112" height="112" alt="avatar" onerror="this.style.display='none'">
      
    </a>

    <h1 class="site-title">
      <a href="/">八一菜刀</a>
    </h1>
    <p class="site-subtitle fst-italic mb-0">Speak less,Do more</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>首页</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>分类</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>标签</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>归档</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>关于</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="mode-toggle btn" aria-label="Switch Mode">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/xiaoymin"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://twitter.com/xiaoymin"
          aria-label="twitter"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['xiaoymin','foxmail.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">
                首页
              </a>
            </span>

          
        
          
        
          
            
              <span>springfox 源码分析(一) 程序入口</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      文章
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="搜索..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">取消</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  <!-- CDN URL -->
  

  <!-- Add image path -->
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  

  
  

  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>springfox 源码分析(一) 程序入口</h1>

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        发表于
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1558368000"
  data-df="YYYY/MM/DD"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  2019/05/21
</time>

      </span>

      <!-- lastmod date -->
      
      <span>
        更新于
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1697273392"
  data-df="YYYY/MM/DD"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  2023/10/14
</time>

      </span>
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          作者

          <em>
            
            
            <a href="https://twitter.com/xiaoymin">xiaoymin</a>
            

          </em>
        </span>

        <!-- read time -->
        <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="2458 字"
>
  <em>13 分钟</em>阅读</span>

      </div>
      <!-- .d-flex -->
    </div>
    <!-- .post-meta -->
  </header>

  <div class="content">
    <p>日期：2019-5-21 21:05:15</p>

<p>地点：家中</p>

<h2 id="前言"><span class="me-2">前言</span><a href="#前言" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>最近也是闲来无事,加上对<a href="https://doc.xiaominfo.com/">swagger-bootstrap-ui</a>也已经发布了将近26个稳定版本了,想到很多以后更有趣的功能,从Java底层扩展插件的方式开发出让国人拥有更棒的文档体验,所以决定研究一下<code class="language-plaintext highlighter-rouge">springfox</code>的源码，看能否对自己有一些启发.开发一些有趣的功能呢.</p>

<p>关于springfox的使用这里不做过多的说明,可以自行搜索查看帮助文档，或者可以参考我提供的<a href="https://gitee.com/xiaoym/swagger-bootstrap-ui-demo">swagger-bootstrap-ui-demo</a>进行swagger的集成示例.</p>

<p>在读springfox的源码之前,我们需要知道他具体的作用是什么？</p>

<p>我觉得有以下几点：</p>

<ul>
  <li>对Spring的RestController、Controller接口进行包装,封装输出为Swagger规范中的path</li>
  <li>针对Rest接口涉及到的model进行解析,包括model的属性等</li>
  <li>满足文档分组的要求,解析tags</li>
</ul>

<p>总结一句话就是：<strong>输出符合Swagger API规范的JSON格式</strong></p>

<h2 id="swagger-规范"><span class="me-2">Swagger 规范</span><a href="#swagger-规范" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>OpenAPI 2.0 规范可以参考官网地址:<a href="https://swagger.io/specification/v2/">https://swagger.io/specification/v2/</a></p>

<p>先来看我们的Swagger规范文件包含哪些元素</p>

<div class="language-json highlighter-rouge"><div class="code-header">
        <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"swagger"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;div style='font-size:14px;color:red;'&gt;swagger-bootstrap-ui-demo RESTful APIs&lt;/div&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"swagger-bootstrap-ui很棒~~~！！！"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"termsOfService"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.group.com/"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"contact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"group@qq.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1:8999"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"basePath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.8.2版本"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Api 182 Controller"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"/2/api/new187/postRequest"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"post"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"api-1871-controller"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"版本2-post请求参数Hidden属性是否生效"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"operationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postRequestUsingPOST_1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"consumes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"application/json"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"produces"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"*/*"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"body"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"model187"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"model187"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"schema"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"originalRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Model187"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"$ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#/definitions/Model187"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"responses"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"200"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"schema"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"originalRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Rest«Model187»"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"$ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#/definitions/Rest«Model187»"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"201"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Created"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"401"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unauthorized"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"403"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Forbidden"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"404"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Not Found"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"security"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"BearerToken"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="s2">"global"</span><span class="w">
                        </span><span class="p">]</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"BearerToken1"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="s2">"global"</span><span class="w">
                        </span><span class="p">]</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"deprecated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"securityDefinitions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"BearerToken"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apiKey"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Authorization"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"header"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"definitions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"AInfoVo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"aId"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"bList"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"aId"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A记录主键"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"bList"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"B信息Map, key为BInfoVo的主键pkId"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"additionalProperties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"originalRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BInfoVo"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"$ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#/definitions/BInfoVo"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AInfoVo"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A信息"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"ActInteger"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"doub1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"double"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"double类型属性"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"float1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"float"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"float类型属性"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"integer"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int64"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Long类型"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BigDecimal类型属性"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"sort"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"integer"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int32"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int类型"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ActInteger"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"Actor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"deepOne"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"originalRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DeepOne"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"$ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#/definitions/DeepOne"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"recipt"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"originalRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Recipt"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"$ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#/definitions/Recipt"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"sort"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"integer"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int32"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Actor"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></div></div>

<p>一个标准的Swagger接口规范可能类似上面的JSON文件,主要有以下属性:</p>

<ul>
  <li><strong>swagger</strong>:当前swagger的版本号</li>
  <li><strong>info</strong>:文档的基础信息,包括描述信息,标题、作者、host等</li>
  <li><strong>tags</strong>：分组tag标志</li>
  <li><strong>paths</strong>:接口明细集合</li>
  <li><strong>securityDefinitions</strong>:权限信息</li>
  <li><strong>definitions</strong>：接口涉及到的Model类型定义</li>
</ul>

<h2 id="使用"><span class="me-2">使用</span><a href="#使用" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>我们对Swagger的规范定义有了一个初步的了解,所以,接下来,我们来查看springfox是如何来实现的</p>

<p>我们在使用<code class="language-plaintext highlighter-rouge">springfox-swagger</code>的时候主要有两步：</p>

<ul>
  <li>创建<code class="language-plaintext highlighter-rouge">Docket</code>实例对象,并使用<code class="language-plaintext highlighter-rouge">@Bean</code>注解注入到Spring容器中</li>
  <li>在Swagger的配置类上添加<code class="language-plaintext highlighter-rouge">@EnableSwagger2</code>注解</li>
</ul>

<h2 id="开始"><span class="me-2">开始</span><a href="#开始" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>我们从<code class="language-plaintext highlighter-rouge">springfox</code>的使用文档上来看,也仅仅知道告诉我们开发人员,需要从<code class="language-plaintext highlighter-rouge">@EnableSwagger2</code>这个注解入手,来跟踪<code class="language-plaintext highlighter-rouge">springfox</code>的创建流程</p>

<p>但是我在看了该注解后,发现其实并不是这样,<code class="language-plaintext highlighter-rouge">springfox</code>源码中使用了大量的Spring的<code class="language-plaintext highlighter-rouge">@Component</code>注解进行实体bean的注入,所以要想找到各个类的依赖关系可以说是相当复杂,加上使用了Spring项目中并不怎么流行的<code class="language-plaintext highlighter-rouge">spring-plugin</code>组件,这更加增加了的阅读源码的难度，说实话,看过之后,已经留下了眼泪(这乱七八糟的什么玩意儿:( )…..</p>

<h3 id="enableswagger2"><span class="me-2">@EnableSwagger2</span><a href="#enableswagger2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>先来看<code class="language-plaintext highlighter-rouge">EnableSwagger2</code>注解的代码</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">springfox.documentation.swagger2.annotations</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Import</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">springfox.documentation.swagger2.configuration.Swagger2DocumentationConfiguration</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.lang.annotation.Documented</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.annotation.Retention</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.annotation.Target</span><span class="o">;</span>

<span class="cm">/**
 * 配合Java配置注解@Configuration使用,启用Swagger的配置注解,使用@Import注解导入Swagger文档的Configuration配置初始化类
 * @see springfox.documentation.spring.web.plugins.Docket
 */</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">annotation</span><span class="o">.</span><span class="na">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@Target</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">annotation</span><span class="o">.</span><span class="na">ElementType</span><span class="o">.</span><span class="na">TYPE</span> <span class="o">})</span>
<span class="nd">@Documented</span>
<span class="nd">@Import</span><span class="o">({</span><span class="nc">Swagger2DocumentationConfiguration</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">EnableSwagger2</span> <span class="o">{</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><code class="language-plaintext highlighter-rouge">@EnableSwagger2</code>注解只干一件事,导入<code class="language-plaintext highlighter-rouge">Swagger2DocumentationConfiguration</code>配置类</p>

<h3 id="swagger2documentationconfiguration"><span class="me-2">Swagger2DocumentationConfiguration</span><a href="#swagger2documentationconfiguration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>继续看<code class="language-plaintext highlighter-rouge">Swagger2DocumentationConfiguration</code>的代码</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="nd">@Configuration</span>
<span class="nd">@Import</span><span class="o">({</span> <span class="nc">SpringfoxWebMvcConfiguration</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">SwaggerCommonConfiguration</span><span class="o">.</span><span class="na">class</span> <span class="o">})</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="o">{</span>
    <span class="s">"springfox.documentation.swagger2.mappers"</span>
<span class="o">})</span>
<span class="nd">@ConditionalOnWebApplication</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Swagger2DocumentationConfiguration</span> <span class="o">{</span>
  <span class="nd">@Bean</span>
  <span class="kd">public</span> <span class="nc">JacksonModuleRegistrar</span> <span class="nf">swagger2Module</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Swagger2JacksonModule</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Bean</span>
  <span class="kd">public</span> <span class="nc">HandlerMapping</span> <span class="nf">swagger2ControllerMapping</span><span class="o">(</span>
      <span class="nc">Environment</span> <span class="n">environment</span><span class="o">,</span>
      <span class="nc">DocumentationCache</span> <span class="n">documentationCache</span><span class="o">,</span>
      <span class="nc">ServiceModelToSwagger2Mapper</span> <span class="n">mapper</span><span class="o">,</span>
      <span class="nc">JsonSerializer</span> <span class="n">jsonSerializer</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">PropertySourcedRequestMappingHandlerMapping</span><span class="o">(</span>
        <span class="n">environment</span><span class="o">,</span>
        <span class="k">new</span> <span class="nf">Swagger2Controller</span><span class="o">(</span><span class="n">environment</span><span class="o">,</span> <span class="n">documentationCache</span><span class="o">,</span> <span class="n">mapper</span><span class="o">,</span> <span class="n">jsonSerializer</span><span class="o">));</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>从代码中,我们可以得知：</p>

<ul>
  <li>注入<code class="language-plaintext highlighter-rouge">JacksonModuleRegistrar</code>实体bean到Spring容器中</li>
  <li>注入一个<code class="language-plaintext highlighter-rouge">HandlerMapping</code>实体Bean到Spring容器中,该接口就是我们经常所见的<code class="language-plaintext highlighter-rouge">/v2/api-docs</code>接口</li>
  <li>扫描<code class="language-plaintext highlighter-rouge">springfox.documentation.swagger2.mappers</code>包路径，进行实体bean的注入工作</li>
  <li>导入<code class="language-plaintext highlighter-rouge">SpringfoxWebMvcConfiguration</code>和<code class="language-plaintext highlighter-rouge">SwaggerCommonConfiguration</code>配置类</li>
</ul>

<p>既然知道了swagger提供接口代码所在,那么我就先来看看<code class="language-plaintext highlighter-rouge">Swagger2Controller</code>的风采</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
</pre></td><td class="rouge-code"><pre>
<span class="nd">@Controller</span>
<span class="nd">@ApiIgnore</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Swagger2Controller</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">DEFAULT_URL</span> <span class="o">=</span> <span class="s">"/v2/api-docs"</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Logger</span> <span class="no">LOGGER</span> <span class="o">=</span> <span class="nc">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="nc">Swagger2Controller</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">HAL_MEDIA_TYPE</span> <span class="o">=</span> <span class="s">"application/hal+json"</span><span class="o">;</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">hostNameOverride</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="nc">DocumentationCache</span> <span class="n">documentationCache</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ServiceModelToSwagger2Mapper</span> <span class="n">mapper</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="nc">JsonSerializer</span> <span class="n">jsonSerializer</span><span class="o">;</span>

  <span class="nd">@Autowired</span>
  <span class="kd">public</span> <span class="nf">Swagger2Controller</span><span class="o">(</span>
      <span class="nc">Environment</span> <span class="n">environment</span><span class="o">,</span>
      <span class="nc">DocumentationCache</span> <span class="n">documentationCache</span><span class="o">,</span>
      <span class="nc">ServiceModelToSwagger2Mapper</span> <span class="n">mapper</span><span class="o">,</span>
      <span class="nc">JsonSerializer</span> <span class="n">jsonSerializer</span><span class="o">)</span> <span class="o">{</span>

    <span class="k">this</span><span class="o">.</span><span class="na">hostNameOverride</span> <span class="o">=</span>
        <span class="n">environment</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span>
            <span class="s">"springfox.documentation.swagger.v2.host"</span><span class="o">,</span>
            <span class="s">"DEFAULT"</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">documentationCache</span> <span class="o">=</span> <span class="n">documentationCache</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">mapper</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">jsonSerializer</span> <span class="o">=</span> <span class="n">jsonSerializer</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@RequestMapping</span><span class="o">(</span>
      <span class="n">value</span> <span class="o">=</span> <span class="no">DEFAULT_URL</span><span class="o">,</span>
      <span class="n">method</span> <span class="o">=</span> <span class="nc">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">,</span>
      <span class="n">produces</span> <span class="o">=</span> <span class="o">{</span> <span class="no">APPLICATION_JSON_VALUE</span><span class="o">,</span> <span class="no">HAL_MEDIA_TYPE</span> <span class="o">})</span>
  <span class="nd">@PropertySourcedMapping</span><span class="o">(</span>
      <span class="n">value</span> <span class="o">=</span> <span class="s">"${springfox.documentation.swagger.v2.path}"</span><span class="o">,</span>
      <span class="n">propertyKey</span> <span class="o">=</span> <span class="s">"springfox.documentation.swagger.v2.path"</span><span class="o">)</span>
  <span class="nd">@ResponseBody</span>
  <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Json</span><span class="o">&gt;</span> <span class="nf">getDocumentation</span><span class="o">(</span>
      <span class="nd">@RequestParam</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"group"</span><span class="o">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span> <span class="nc">String</span> <span class="n">swaggerGroup</span><span class="o">,</span>
      <span class="nc">HttpServletRequest</span> <span class="n">servletRequest</span><span class="o">)</span> <span class="o">{</span>

    <span class="nc">String</span> <span class="n">groupName</span> <span class="o">=</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">fromNullable</span><span class="o">(</span><span class="n">swaggerGroup</span><span class="o">).</span><span class="na">or</span><span class="o">(</span><span class="nc">Docket</span><span class="o">.</span><span class="na">DEFAULT_GROUP_NAME</span><span class="o">);</span>
    <span class="nc">Documentation</span> <span class="n">documentation</span> <span class="o">=</span> <span class="n">documentationCache</span><span class="o">.</span><span class="na">documentationByGroup</span><span class="o">(</span><span class="n">groupName</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">documentation</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="no">LOGGER</span><span class="o">.</span><span class="na">warn</span><span class="o">(</span><span class="s">"Unable to find specification for group {}"</span><span class="o">,</span> <span class="n">groupName</span><span class="o">);</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Json</span><span class="o">&gt;(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">NOT_FOUND</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="nc">Swagger</span> <span class="n">swagger</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">mapDocumentation</span><span class="o">(</span><span class="n">documentation</span><span class="o">);</span>
    <span class="nc">UriComponents</span> <span class="n">uriComponents</span> <span class="o">=</span> <span class="n">componentsFrom</span><span class="o">(</span><span class="n">servletRequest</span><span class="o">,</span> <span class="n">swagger</span><span class="o">.</span><span class="na">getBasePath</span><span class="o">());</span>
    <span class="n">swagger</span><span class="o">.</span><span class="na">basePath</span><span class="o">(</span><span class="nc">Strings</span><span class="o">.</span><span class="na">isNullOrEmpty</span><span class="o">(</span><span class="n">uriComponents</span><span class="o">.</span><span class="na">getPath</span><span class="o">())</span> <span class="o">?</span> <span class="s">"/"</span> <span class="o">:</span> <span class="n">uriComponents</span><span class="o">.</span><span class="na">getPath</span><span class="o">());</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">isNullOrEmpty</span><span class="o">(</span><span class="n">swagger</span><span class="o">.</span><span class="na">getHost</span><span class="o">()))</span> <span class="o">{</span>
      <span class="n">swagger</span><span class="o">.</span><span class="na">host</span><span class="o">(</span><span class="n">hostName</span><span class="o">(</span><span class="n">uriComponents</span><span class="o">));</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Json</span><span class="o">&gt;(</span><span class="n">jsonSerializer</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">swagger</span><span class="o">),</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="nc">String</span> <span class="nf">hostName</span><span class="o">(</span><span class="nc">UriComponents</span> <span class="n">uriComponents</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="s">"DEFAULT"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">hostNameOverride</span><span class="o">))</span> <span class="o">{</span>
      <span class="nc">String</span> <span class="n">host</span> <span class="o">=</span> <span class="n">uriComponents</span><span class="o">.</span><span class="na">getHost</span><span class="o">();</span>
      <span class="kt">int</span> <span class="n">port</span> <span class="o">=</span> <span class="n">uriComponents</span><span class="o">.</span><span class="na">getPort</span><span class="o">();</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">port</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s:%d"</span><span class="o">,</span> <span class="n">host</span><span class="o">,</span> <span class="n">port</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="k">return</span> <span class="n">host</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">hostNameOverride</span><span class="o">;</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>从接口代码中,我们得知:</p>

<ul>
  <li>springfox为我们提供了一个默认的接口<code class="language-plaintext highlighter-rouge">/v2/api-docs</code></li>
  <li>同时我们也应该知道,springfox的初始化工作不在这里,springfox在应用启动时已经初始化好相应的文档对象<code class="language-plaintext highlighter-rouge">Documentation</code>,而接口此处仅仅只是从缓存对象中获取而已</li>
</ul>

<h3 id="springfoxwebmvcconfiguration"><span class="me-2">SpringfoxWebMvcConfiguration</span><a href="#springfoxwebmvcconfiguration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>通过名称,我们可能也猜到了一部分内容,这是和Spring的webmvc相关的配置类,来看具体代码：</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre></td><td class="rouge-code"><pre>
<span class="nd">@Configuration</span>
<span class="nd">@Import</span><span class="o">({</span> <span class="nc">ModelsConfiguration</span><span class="o">.</span><span class="na">class</span> <span class="o">})</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="o">{</span>
    <span class="s">"springfox.documentation.spring.web.scanners"</span><span class="o">,</span>
    <span class="s">"springfox.documentation.spring.web.readers.operation"</span><span class="o">,</span>
    <span class="s">"springfox.documentation.spring.web.readers.parameter"</span><span class="o">,</span>
    <span class="s">"springfox.documentation.spring.web.plugins"</span><span class="o">,</span>
    <span class="s">"springfox.documentation.spring.web.paths"</span>
<span class="o">})</span>
<span class="nd">@EnablePluginRegistries</span><span class="o">({</span> <span class="nc">DocumentationPlugin</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
    <span class="nc">ApiListingBuilderPlugin</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
    <span class="nc">OperationBuilderPlugin</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
    <span class="nc">ParameterBuilderPlugin</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
    <span class="nc">ExpandedParameterBuilderPlugin</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
    <span class="nc">ResourceGroupingStrategy</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
    <span class="nc">OperationModelsProviderPlugin</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
    <span class="nc">DefaultsProviderPlugin</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
    <span class="nc">PathDecorator</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
    <span class="nc">ApiListingScannerPlugin</span><span class="o">.</span><span class="na">class</span>
<span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringfoxWebMvcConfiguration</span> <span class="o">{</span>

  <span class="nd">@Bean</span>
  <span class="kd">public</span> <span class="nc">Defaults</span> <span class="nf">defaults</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Defaults</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Bean</span>
  <span class="kd">public</span> <span class="nc">DocumentationCache</span> <span class="nf">resourceGroupCache</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">DocumentationCache</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Bean</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">ObjectMapperConfigurer</span> <span class="nf">objectMapperConfigurer</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">ObjectMapperConfigurer</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Bean</span>
  <span class="kd">public</span> <span class="nc">JsonSerializer</span> <span class="nf">jsonSerializer</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">JacksonModuleRegistrar</span><span class="o">&gt;</span> <span class="n">moduleRegistrars</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">JsonSerializer</span><span class="o">(</span><span class="n">moduleRegistrars</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Bean</span>
  <span class="kd">public</span> <span class="nc">DescriptionResolver</span> <span class="nf">descriptionResolver</span><span class="o">(</span><span class="nc">Environment</span> <span class="n">environment</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">DescriptionResolver</span><span class="o">(</span><span class="n">environment</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Bean</span>
  <span class="kd">public</span> <span class="nc">HandlerMethodResolver</span> <span class="nf">methodResolver</span><span class="o">(</span><span class="nc">TypeResolver</span> <span class="n">resolver</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">HandlerMethodResolver</span><span class="o">(</span><span class="n">resolver</span><span class="o">);</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>从代码中能知道：</p>

<ul>
  <li>注入了文档缓存DocumentationCache实体bean</li>
  <li>注入了JSON序列化实体bean</li>
  <li>通过<code class="language-plaintext highlighter-rouge">EnablePluginRegistries</code>注解,开启Spring-Plugin组件的相关插件类,关于<code class="language-plaintext highlighter-rouge">Spring-Plugin</code>我们后面会说明</li>
  <li>扫描相关package路径</li>
  <li>导入<code class="language-plaintext highlighter-rouge">ModelsConfiguration</code>配置文件</li>
</ul>

<p>来看<code class="language-plaintext highlighter-rouge">ModelsConfiguration</code>配置类有做了那些操作呢</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="nd">@Configuration</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="o">{</span>
    <span class="s">"springfox.documentation.schema"</span>
<span class="o">})</span>
<span class="nd">@EnablePluginRegistries</span><span class="o">({</span>
    <span class="nc">ModelBuilderPlugin</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
    <span class="nc">ModelPropertyBuilderPlugin</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
    <span class="nc">TypeNameProviderPlugin</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
    <span class="nc">SyntheticModelProviderPlugin</span><span class="o">.</span><span class="na">class</span>
<span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ModelsConfiguration</span> <span class="o">{</span>
  <span class="nd">@Bean</span>
  <span class="kd">public</span> <span class="nc">TypeResolver</span> <span class="nf">typeResolver</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">TypeResolver</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>和<code class="language-plaintext highlighter-rouge">SpringfoxWebMvcConfiguration</code>配置类行为相似，主要是:</p>

<ul>
  <li>扫描<code class="language-plaintext highlighter-rouge">springfox.documentation.schema</code>进行实体bean的注入或者初始化工作</li>
  <li>通过<code class="language-plaintext highlighter-rouge">EnablePluginRegistries</code>插件开启注入相关插件的实体bean</li>
  <li>注入<code class="language-plaintext highlighter-rouge">TypeResolver</code>实体bean到Spring容器中</li>
</ul>

<h3 id="swaggercommonconfiguration"><span class="me-2">SwaggerCommonConfiguration</span><a href="#swaggercommonconfiguration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Swagger的公共配置类</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="nd">@Configuration</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="o">{</span>
    <span class="s">"springfox.documentation.swagger.schema"</span><span class="o">,</span>
    <span class="s">"springfox.documentation.swagger.readers"</span><span class="o">,</span>
    <span class="s">"springfox.documentation.swagger.web"</span>
<span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SwaggerCommonConfiguration</span> <span class="o">{</span>

<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>主要是进行backpage包的扫描,注入到Spring的容器中初始化相关的操作</p>

<h2 id="思维导图"><span class="me-2">思维导图</span><a href="#思维导图" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>或许通过一张思维导图,我们能对本小结有一个初步的印象,对<code class="language-plaintext highlighter-rouge">@EnableSwagger2</code>注解的做作用有一个初步的了解</p>

<p><a href="/images/springfox/springfox-enable.png" class="popup img-link  shimmer"><img src="/images/springfox/springfox-enable.png" alt="" loading="lazy"></a></p>

<p>总结就是两点：</p>

<ul>
  <li>扫描package</li>
  <li>注入bean</li>
</ul>

<h2 id="总结"><span class="me-2">总结</span><a href="#总结" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>整个springfox的初始化工作如果我们从上面来看,那绝对是灾难.心中肯定会有诸多疑问：</p>

<ul>
  <li>我们通过在外部创建Docket对象,提供诸如扫描接口包路径的方式进行文档分组,springfox何时初始化？</li>
  <li>分组的接口代码在哪儿?</li>
  <li>初始化的入口在哪儿?</li>
</ul>

<p>这主要是因为Springfox使用Spring的<code class="language-plaintext highlighter-rouge">@Component</code>注解和<code class="language-plaintext highlighter-rouge">ComponentScan</code>扫描包导致的,让我们无从下手啊（累觉不爱）~~~~</p>

<p>带着这些疑问,我们继续往下看~~！</p>


  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
    <div class="post-meta mb-3">
      <i class="far fa-folder-open fa-fw me-1"></i>
      
      <a href="/categories/springfox/">springfox</a>
    </div>
    

    <!-- tags -->
    

    <div class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      ">
      <div class="license-wrapper">
        
        

        本文由作者按照 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         进行授权
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted me-1">分享</span>
  <span class="share-icons">
    
    
    

    
      
      <a
        href="https://twitter.com/intent/tweet?text=springfox%20%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90(%E4%B8%80)%20%E7%A8%8B%E5%BA%8F%E5%85%A5%E5%8F%A3%20-%20%E5%85%AB%E4%B8%80%E8%8F%9C%E5%88%80&url=%2Fposts%2Fspringfox-1%2F"
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Twitter"
        target="_blank"
        rel="noopener"
        aria-label="Twitter"
      >
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    
      
      <a
        href="https://www.facebook.com/sharer/sharer.php?title=springfox%20%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90(%E4%B8%80)%20%E7%A8%8B%E5%BA%8F%E5%85%A5%E5%8F%A3%20-%20%E5%85%AB%E4%B8%80%E8%8F%9C%E5%88%80&u=%2Fposts%2Fspringfox-1%2F"
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Facebook"
        target="_blank"
        rel="noopener"
        aria-label="Facebook"
      >
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    
      
      <a
        href="https://t.me/share/url?url=%2Fposts%2Fspringfox-1%2F&text=springfox%20%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90(%E4%B8%80)%20%E7%A8%8B%E5%BA%8F%E5%85%A5%E5%8F%A3%20-%20%E5%85%AB%E4%B8%80%E8%8F%9C%E5%88%80"
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Telegram"
        target="_blank"
        rel="noopener"
        aria-label="Telegram"
      >
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="分享链接"
      data-title-succeed="链接已复制！"
    >
      <i class="fa-fw fas fa-link pe-none"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>

            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted">
            <div class="access">
              <!-- Get the last 5 posts from lastmod list. -->

<div class="xiaoym-qrcode">
  <div class="xiaoym-qrcode-title">
    <h2>微信公众号(八一菜刀)</h2>
  </div>
  <div style="text-align: center;"><img src="/images/website/mp/qrcode.jpg" /> </div>
</div>














<section id="access-lastmod">
  <h2 class="panel-heading">最近更新</h2>
  <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
    
    
    
    
    <li class="text-truncate lh-lg">
      <a href="/posts/llm-start/">全面进击AI大模型、RAG领域</a>
    </li>
    
    
    
    
    <li class="text-truncate lh-lg">
      <a href="/posts/rag-inaction-java/">实战0-1,Java开发者也能看懂的大模型应用RAG开发实践</a>
    </li>
    
    
    
    
    <li class="text-truncate lh-lg">
      <a href="/posts/use-prompt-framework/">用好大模型?这5种实用的Prompt框架你一定要看看!</a>
    </li>
    
    
    
    
    <li class="text-truncate lh-lg">
      <a href="/posts/knife4j-insight-mvp/">Knife4jInsight平台版-MVP版本v1.0.0发布</a>
    </li>
    
    
    
    
    <li class="text-truncate lh-lg">
      <a href="/posts/spring-boot-conditional/">Spring Boot框架中如何优雅的注入实体Bean</a>
    </li>
    
  </ul>
</section>
<!-- #access-lastmod -->

              <!-- The trending tags list -->















  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">热门标签</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/llm/">LLM</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/rag/">RAG</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/rag%E5%AE%9E%E6%88%98/">RAG实战</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%AE%9E%E6%88%98/">大模型实战</a>
      
    </div>
  </section>


            </div>

            
              
              



  <section id="toc-wrapper" class="ps-0 pe-4">
    <h2 class="panel-heading ps-3 pt-2 mb-2">文章内容</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->














  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">相关文章</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/springfox-13/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1559059200"
  data-df="YYYY/MM/DD"
  
>
  2019/05/29
</time>

              <h4 class="pt-0 my-2">springfox 源码分析(十三) 自定义扩展实现接口的排序</h4>
              <div class="text-muted">
                <p>
                  





                  很多时候,Swagger定义的标准并不能满足我们实际的需求,比如拿分组后的接口来说,有适合我们希望我们的接口能够排序,假如我们当前有一个注册的需求实现,那么他的接口可能是这样的：

1.获取验证码 -&amp;gt; 2.校验用户名是否有效 -&amp;gt; 3.注册验证 -&amp;gt; 4.登录

如果我们没有排序的情况下,上面的接口对于开发人员来说可能是杂乱无章的,对于初级的接口对接人员来说,排序更能让开...
                </p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/springfox-14/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1559145600"
  data-df="YYYY/MM/DD"
  
>
  2019/05/30
</time>

              <h4 class="pt-0 my-2">springfox 源码分析(十四) 归档得到ApiListing接口集合</h4>
              <div class="text-muted">
                <p>
                  





                  在前面我们拿到了接口的Model类型集合,然后还获取到了该接口的ApiDescription描述信息

此时针对这些信息,进行接口的资源整合,最终构造ApiListing类

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
4...
                </p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/springfox-15/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1559232000"
  data-df="YYYY/MM/DD"
  
>
  2019/05/31
</time>

              <h4 class="pt-0 my-2">springfox 源码分析(十五) 归档得到Documentation文档对象</h4>
              <div class="text-muted">
                <p>
                  





                  通过上篇的分析,我们已经得到了ApiListing的map集合，接下来最终做文档归档,得到Documentation对象

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
/***
   * 最终生成Documentation...
                </p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/springfox-0/"
      class="btn btn-outline-primary"
      aria-label="上一篇"
    >
      <p>springfox 源码系列</p>
    </a>
  

  
    <a
      href="/posts/springfox-2/"
      class="btn btn-outline-primary"
      aria-label="下一篇"
    >
      <p>springfox 源码分析(二) 初探mapstruct</p>
    </a>
  
</nav>

            
              
              <!--  The comments switcher -->

  
  <!-- https://giscus.app/ -->
<script type="text/javascript">
  (function () {
    const origin = 'https://giscus.app';
    const iframe = 'iframe.giscus-frame';
    const lightTheme = 'light';
    const darkTheme = 'dark_dimmed';

    let initTheme = lightTheme;
    const html = document.documentElement;

    if (
      (html.hasAttribute('data-mode') &&
        html.getAttribute('data-mode') === 'dark') ||
      (!html.hasAttribute('data-mode') &&
        window.matchMedia('(prefers-color-scheme: dark)').matches)
    ) {
      initTheme = darkTheme;
    }

    let giscusAttributes = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'xiaoymin/xiaoymin.github.io',
      'data-repo-id': 'MDEwOlJlcG9zaXRvcnk3OTUzMjIxNw==',
      'data-category': 'Comments',
      'data-category-id': 'DIC_kwDOBL2Quc4CaKF6',
      'data-mapping': 'pathname',
      'data-reactions-enabled': '1',
      'data-emit-metadata': '0',
      'data-theme': initTheme,
      'data-input-position': 'bottom',
      'data-lang': 'zh-CN',
      'data-loading': 'lazy',
      crossorigin: 'anonymous',
      async: ''
    };

    let giscusScript = document.createElement('script');
    Object.entries(giscusAttributes).forEach(([key, value]) =>
      giscusScript.setAttribute(key, value)
    );
    document.getElementById('tail-wrapper').appendChild(giscusScript);

    addEventListener('message', (event) => {
      if (
        event.source === window &&
        event.data &&
        event.data.direction === ModeToggle.ID
      ) {
        /* global theme mode changed */
        const mode = event.data.message;
        const theme = mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme;

        const message = {
          setConfig: {
            theme: theme
          }
        };

        const giscus = document.querySelector(iframe).contentWindow;
        giscus.postMessage({ giscus: message }, origin);
      }
    });
  })();
</script>



            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>
    ©
    <time>2023</time>
    <a href="https://twitter.com/xiaoymin">xiaoymin</a>.
    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。"
      >保留部分权利。</span>
    
  </p>

  <p>本站采用 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 主题 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a>
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">热门标签</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/llm/">LLM</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/rag/">RAG</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/rag%E5%AE%9E%E6%88%98/">RAG实战</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%AE%9E%E6%88%98/">大模型实战</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">发现新版本的内容。</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      更新
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->

    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/zh.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.21.2/dist/tocbot.min.js"></script>






<script defer src="/assets/js/dist/post.min.js"></script>






    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  /* Note: dependent library will be loaded in `js-selector.html` */
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5"></p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>

  </body>
</html>

