<!DOCTYPE html>
<html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>springfox 源码分析(十三) 自定义扩展实现接口的排序 &mdash; 八一菜刀</title>
    <link rel="stylesheet" href="http://localhost:4000/assets/vendor/primer-css/css/primer.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/vendor/primer-markdown/dist/user-content.min.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/vendor/octicons/octicons/octicons.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/components/collection.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/components/repo-card.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/sections/repo-list.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/sections/mini-repo-list.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/components/boxed-group.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/globals/common.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/vendor/share.js/dist/css/share.min.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/globals/responsive.css">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/posts/index.css">
    <!-- Latest compiled and minified CSS -->
    

    
    <link rel="canonical" href="http://localhost:4000/2019/05/29/springfox-13/">
    <link rel="alternate" type="application/atom+xml" title="八一菜刀" href="http://localhost:4000/feed.xml">
    <link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
    
    <meta property="og:title" content="springfox 源码分析(十三) 自定义扩展实现接口的排序">
      
    <meta name="keywords" content="springfox 源码系列,springfox-swagger">
    <meta name="og:keywords" content="springfox 源码系列,springfox-swagger">
      
    <meta name="description" content="很多时候,Swagger定义的标准并不能满足我们实际的需求,比如拿分组后的接口来说,有适合我们希望我们的接口能够排序,假如我们当前有一个注册的需求实现,那么他的接口可能是这样的：">
    <meta name="og:description" content="很多时候,Swagger定义的标准并不能满足我们实际的需求,比如拿分组后的接口来说,有适合我们希望我们的接口能够排序,假如我们当前有一个注册的需求实现,那么他的接口可能是这样的：">
      
    
    
        
    
    <meta property="og:url" content="http://localhost:4000/2019/05/29/springfox-13/">
    <meta property="og:site_name" content="八一菜刀">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh_CN" />
    
    <meta property="article:published_time" content="2019-05-29">
    
    <script src="http://localhost:4000/assets/vendor/jquery/dist/jquery.min.js"></script>
    <script src="http://localhost:4000/assets/js/jquery-ui.js"></script>
    <script src="http://localhost:4000/assets/js/main.js"></script>
</head>
<body class="" data-mz="">
    <header class="site-header">
        <div class="container">
            <h1><a href="http://localhost:4000/" title="八一菜刀"><span class="octicon octicon-mark-github"></span> 八一菜刀</a></h1>
            <button class="collapsed mobile-visible" type="button" onclick="toggleMenu();">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <nav class="site-header-nav" role="navigation">
                
                <a href="http://localhost:4000/" class=" site-header-nav-item" target="" title="首页">首页</a>
                
                <a href="http://localhost:4000/categories/" class=" site-header-nav-item" target="" title="分类">分类</a>
                
                <a href="http://localhost:4000/archives/" class=" site-header-nav-item" target="" title="归档">归档</a>
                
                <a href="http://localhost:4000/about/" class=" site-header-nav-item" target="" title="关于">关于</a>
                
            </nav>
        </div>
    </header>
    <!-- / header -->

    <section class="collection-head small geopattern" data-pattern-id="springfox 源码分析(">
<div class="container">
  <div class="columns">
    <div class="column three-fourths">
      <div class="collection-title">
        <h1 class="collection-header">springfox 源码分析(十三) 自定义扩展实现接口的排序</h1>
        <div class="collection-info">
          
          <span class="meta-info">
            <span class="octicon octicon-calendar"></span> 2019/05/29
          </span>
          
          
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href="http://localhost:4000/categories/#springfox" title="springfox">springfox</a>
          </span>
          
          <span class="meta-info">
            <!--<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>-->
            <span id="busuanzi_container_page_pv"> 浏览<span id="busuanzi_value_page_pv"></span>次</span>
          </span>
        </div>
      </div>
    </div>
  </div>
</div>
</section>
<!-- / .banner -->
<section class="container content">
<div class="columns">
  <div class="column three-fourths" >
    <article class="article-content markdown-body">
    <p>很多时候,Swagger定义的标准并不能满足我们实际的需求,比如拿分组后的接口来说,有适合我们希望我们的接口能够排序,假如我们当前有一个注册的需求实现,那么他的接口可能是这样的：</p>

<p>1.获取验证码 -&gt; 2.校验用户名是否有效 -&gt; 3.注册验证 -&gt; 4.登录</p>

<p>如果我们没有排序的情况下,上面的接口对于开发人员来说可能是杂乱无章的,对于初级的接口对接人员来说,排序更能让开发者把当前的需求清晰明了的用代码来实现掉,为此，接口文档的作用也能最大化.</p>

<p>那么,在swagger的标准中,那些允许我们自定义扩展,在Springfox中我们又如何来实现我们的自定义扩展呢?</p>

<h2 id="swagger标准">Swagger标准</h2>

<p>先来看Swagger定义的几个标准属性,可参考<a href="https://swagger.io/specification/v2/">官方文档</a></p>

<table>
  <thead>
    <tr>
      <th>swagger</th>
      <th><code class="language-plaintext highlighter-rouge">string</code></th>
      <th><strong>Required.</strong> Specifies the Swagger Specification version being used. It can be used by the Swagger UI and other clients to interpret the API listing. The value MUST be <code class="language-plaintext highlighter-rouge">"2.0"</code>.</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>info</td>
      <td><a href="https://swagger.io/specification/v2/#infoObject">Info Object</a></td>
      <td><strong>Required.</strong> Provides metadata about the API. The metadata can be used by the clients if needed.</td>
    </tr>
    <tr>
      <td>host</td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>The host (name or ip) serving the API. This MUST be the host only and does not include the scheme nor sub-paths. It MAY include a port. If the <code class="language-plaintext highlighter-rouge">host</code> is not included, the host serving the documentation is to be used (including the port). The <code class="language-plaintext highlighter-rouge">host</code> does not support <a href="https://swagger.io/specification/v2/#pathTemplating">path templating</a>.</td>
    </tr>
    <tr>
      <td>basePath</td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>The base path on which the API is served, which is relative to the <a href="https://swagger.io/specification/v2/#swaggerHost"><code class="language-plaintext highlighter-rouge">host</code></a>. If it is not included, the API is served directly under the <code class="language-plaintext highlighter-rouge">host</code>. The value MUST start with a leading slash (<code class="language-plaintext highlighter-rouge">/</code>). The <code class="language-plaintext highlighter-rouge">basePath</code> does not support <a href="https://swagger.io/specification/v2/#pathTemplating">path templating</a>.</td>
    </tr>
    <tr>
      <td>schemes</td>
      <td>[<code class="language-plaintext highlighter-rouge">string</code>]</td>
      <td>The transfer protocol of the API. Values MUST be from the list: <code class="language-plaintext highlighter-rouge">"http"</code>, <code class="language-plaintext highlighter-rouge">"https"</code>, <code class="language-plaintext highlighter-rouge">"ws"</code>, <code class="language-plaintext highlighter-rouge">"wss"</code>. If the <code class="language-plaintext highlighter-rouge">schemes</code> is not included, the default scheme to be used is the one used to access the Swagger definition itself.</td>
    </tr>
    <tr>
      <td>consumes</td>
      <td>[<code class="language-plaintext highlighter-rouge">string</code>]</td>
      <td>A list of MIME types the APIs can consume. This is global to all APIs but can be overridden on specific API calls. Value MUST be as described under <a href="https://swagger.io/specification/v2/#mimeTypes">Mime Types</a>.</td>
    </tr>
    <tr>
      <td>produces</td>
      <td>[<code class="language-plaintext highlighter-rouge">string</code>]</td>
      <td>A list of MIME types the APIs can produce. This is global to all APIs but can be overridden on specific API calls. Value MUST be as described under <a href="https://swagger.io/specification/v2/#mimeTypes">Mime Types</a>.</td>
    </tr>
    <tr>
      <td>paths</td>
      <td><a href="https://swagger.io/specification/v2/#pathsObject">Paths Object</a></td>
      <td><strong>Required.</strong> The available paths and operations for the API.</td>
    </tr>
    <tr>
      <td>definitions</td>
      <td><a href="https://swagger.io/specification/v2/#definitionsObject">Definitions Object</a></td>
      <td>An object to hold data types produced and consumed by operations.</td>
    </tr>
    <tr>
      <td>parameters</td>
      <td><a href="https://swagger.io/specification/v2/#parametersDefinitionsObject">Parameters Definitions Object</a></td>
      <td>An object to hold parameters that can be used across operations. This property <em>does not</em> define global parameters for all operations.</td>
    </tr>
    <tr>
      <td>responses</td>
      <td><a href="https://swagger.io/specification/v2/#responsesDefinitionsObject">Responses Definitions Object</a></td>
      <td>An object to hold responses that can be used across operations. This property <em>does not</em> define global responses for all operations.</td>
    </tr>
    <tr>
      <td>securityDefinitions</td>
      <td><a href="https://swagger.io/specification/v2/#securityDefinitionsObject">Security Definitions Object</a></td>
      <td>Security scheme definitions that can be used across the specification.</td>
    </tr>
    <tr>
      <td>security</td>
      <td>[<a href="https://swagger.io/specification/v2/#securityRequirementObject">Security Requirement Object</a>]</td>
      <td>A declaration of which security schemes are applied for the API as a whole. The list of values describes alternative security schemes that can be used (that is, there is a logical OR between the security requirements). Individual operations can override this definition.</td>
    </tr>
    <tr>
      <td>tags</td>
      <td>[<a href="https://swagger.io/specification/v2/#tagObject">Tag Object</a>]</td>
      <td>A list of tags used by the specification with additional metadata. The order of the tags can be used to reflect on their order by the parsing tools. Not all tags that are used by the <a href="https://swagger.io/specification/v2/#operationObject">Operation Object</a>must be declared. The tags that are not declared may be organized randomly or based on the tools’ logic. Each tag name in the list MUST be unique.</td>
    </tr>
    <tr>
      <td>externalDocs</td>
      <td><a href="https://swagger.io/specification/v2/#externalDocumentationObject">External Documentation Object</a></td>
      <td>Additional external documentation.</td>
    </tr>
  </tbody>
</table>

<p>在上面定义的标准字段中,最后一个是扩展对象,我们在Java对象中<code class="language-plaintext highlighter-rouge">io.swagger.models.Swagger</code>中可以看到他的定义</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Swagger</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="nc">String</span> <span class="n">swagger</span> <span class="o">=</span> <span class="s">"2.0"</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">Info</span> <span class="n">info</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">String</span> <span class="n">host</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">String</span> <span class="n">basePath</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Tag</span><span class="o">&gt;</span> <span class="n">tags</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Scheme</span><span class="o">&gt;</span> <span class="n">schemes</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">consumes</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">produces</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">SecurityRequirement</span><span class="o">&gt;</span> <span class="n">security</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Path</span><span class="o">&gt;</span> <span class="n">paths</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">SecuritySchemeDefinition</span><span class="o">&gt;</span> <span class="n">securityDefinitions</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Model</span><span class="o">&gt;</span> <span class="n">definitions</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Parameter</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Response</span><span class="o">&gt;</span> <span class="n">responses</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">ExternalDocs</span> <span class="n">externalDocs</span><span class="o">;</span>
    <span class="c1">//扩展属性</span>
    <span class="kd">protected</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">vendorExtensions</span><span class="o">;</span>
    <span class="c1">//setter and getter</span>
<span class="o">}</span>
</code></pre></div></div>

<p>所以从上面的接口定义来看,我们最终可以来一一查看Swagger支持哪些对象进行自定义扩展属性</p>

<h3 id="swagger根对象扩展">Swagger根对象扩展</h3>

<p>在Swagger的根对象中,我们看到他是有<code class="language-plaintext highlighter-rouge">vendorExtensions</code>扩展属性的支持的，是一个散列的数据结构类型，这意味着我们可以在Swagger的根对象中添加多个扩展属性</p>

<p>扩展属性名称的规则必须是以<code class="language-plaintext highlighter-rouge">x-</code>来开头，所有的都是这个规则</p>

<table>
  <thead>
    <tr>
      <th>Field Pattern</th>
      <th style="text-align: center">Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>^x-</td>
      <td style="text-align: center">Any</td>
      <td>Allows extensions to the Swagger Schema. The field name MUST begin with <code class="language-plaintext highlighter-rouge">x-</code>, for example, <code class="language-plaintext highlighter-rouge">x-internal-id</code>. The value can be <code class="language-plaintext highlighter-rouge">null</code>, a primitive, an array or an object. See <a href="https://swagger.io/specification/v2/#vendorExtensions">Vendor Extensions</a> for further details.</td>
    </tr>
  </tbody>
</table>

<p>看到此处,以前在swagger-bootstrap-ui的1.8.5版本中添加的扩展属性都是不规范的,因为没有应用swagger的标准规则，在后期的版本中要重写该规则实现</p>

<p>所以,我们在Swagger根路径扩展的规则最终生成的JSON格式可能是这样：</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"swagger"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;div style='font-size:14px;color:red;'&gt;swagger-bootstrap-ui-demo RESTful APIs&lt;/div&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"swagger-bootstrap-ui很棒~~~！！！"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"termsOfService"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.group.com/"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"contact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"group@qq.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1:8999"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"basePath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.8.2版本"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Api 182 Controller"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"/2/api/new187/postRequest"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"post"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"api-1871-controller"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"版本2-post请求参数Hidden属性是否生效"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"operationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postRequestUsingPOST_1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"consumes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"application/json"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"produces"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"*/*"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"body"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"model187"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"model187"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"schema"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"originalRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Model187"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"$ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#/definitions/Model187"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"responses"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"200"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"schema"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"originalRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Rest«Model187»"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"$ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#/definitions/Rest«Model187»"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"201"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Created"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"401"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unauthorized"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"403"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Forbidden"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"404"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Not Found"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"security"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"BearerToken"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="s2">"global"</span><span class="w">
                        </span><span class="p">]</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"BearerToken1"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="s2">"global"</span><span class="w">
                        </span><span class="p">]</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"deprecated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"securityDefinitions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"BearerToken"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apiKey"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Authorization"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"header"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"definitions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"AInfoVo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"aId"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"bList"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"aId"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A记录主键"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"bList"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"B信息Map, key为BInfoVo的主键pkId"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"additionalProperties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"originalRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BInfoVo"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"$ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#/definitions/BInfoVo"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AInfoVo"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A信息"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"ActInteger"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"doub1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"double"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"double类型属性"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"float1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"float"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"float类型属性"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"integer"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int64"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Long类型"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BigDecimal类型属性"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"sort"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"integer"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int32"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int类型"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ActInteger"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"Actor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"deepOne"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"originalRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DeepOne"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"$ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#/definitions/DeepOne"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"recipt"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"originalRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Recipt"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"$ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#/definitions/Recipt"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"sort"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"integer"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int32"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Actor"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"x-description"</span><span class="p">:</span><span class="s2">"Swagger扩展属性之一Description"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">x-description</code>属性就是我们扩展的标准的扩展属性，我们在Java代码中也可以这么来实现：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Swagger</span> <span class="n">swagger</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">mapDocumentation</span><span class="o">(</span><span class="n">documentation</span><span class="o">);</span>
<span class="n">swagger</span><span class="o">.</span><span class="na">setVendorExtension</span><span class="o">(</span><span class="s">"x-description"</span><span class="o">,</span><span class="s">"Swagger扩展属性之一Description"</span><span class="o">);</span>
</code></pre></div></div>

<h3 id="path接口扩展">path接口扩展</h3>

<p>同上面的规则,path中定义的属性，我们同样可以扩展我们的规则,此时我们的需求,根据接口来排序就可以通过path增加扩展属性来实现,比如我们给path添加一个扩展属性<code class="language-plaintext highlighter-rouge">x-order</code></p>

<p>path的JSON结构就可能如下：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">"/2/api/new187/postRequest"</span><span class="o">:</span> <span class="o">{</span>
    <span class="s">"post"</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">"tags"</span><span class="o">:</span> <span class="o">[</span>
            <span class="s">"api-1871-controller"</span>
        <span class="o">],</span>
        <span class="s">"summary"</span><span class="o">:</span> <span class="s">"版本2-post请求参数Hidden属性是否生效"</span><span class="o">,</span>
        <span class="s">"operationId"</span><span class="o">:</span> <span class="s">"postRequestUsingPOST_1"</span><span class="o">,</span>
        <span class="s">"consumes"</span><span class="o">:</span> <span class="o">[</span>
            <span class="s">"application/json"</span>
        <span class="o">],</span>
        <span class="s">"produces"</span><span class="o">:</span> <span class="o">[</span>
            <span class="s">"*/*"</span>
        <span class="o">],</span>
        <span class="s">"parameters"</span><span class="o">:</span> <span class="o">[</span>
            <span class="o">{</span>
                <span class="s">"in"</span><span class="o">:</span> <span class="s">"body"</span><span class="o">,</span>
                <span class="s">"name"</span><span class="o">:</span> <span class="s">"model187"</span><span class="o">,</span>
                <span class="s">"description"</span><span class="o">:</span> <span class="s">"model187"</span><span class="o">,</span>
                <span class="s">"required"</span><span class="o">:</span> <span class="kc">true</span><span class="o">,</span>
                <span class="s">"schema"</span><span class="o">:</span> <span class="o">{</span>
                    <span class="s">"originalRef"</span><span class="o">:</span> <span class="s">"Model187"</span><span class="o">,</span>
                    <span class="s">"$ref"</span><span class="o">:</span> <span class="s">"#/definitions/Model187"</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">],</span>
        <span class="s">"responses"</span><span class="o">:</span> <span class="o">{</span>
            <span class="s">"200"</span><span class="o">:</span> <span class="o">{</span>
                <span class="s">"description"</span><span class="o">:</span> <span class="s">"OK"</span><span class="o">,</span>
                <span class="s">"schema"</span><span class="o">:</span> <span class="o">{</span>
                    <span class="s">"originalRef"</span><span class="o">:</span> <span class="s">"Rest«Model187»"</span><span class="o">,</span>
                    <span class="s">"$ref"</span><span class="o">:</span> <span class="s">"#/definitions/Rest«Model187»"</span>
                <span class="o">}</span>
            <span class="o">},</span>
            <span class="s">"201"</span><span class="o">:</span> <span class="o">{</span>
                <span class="s">"description"</span><span class="o">:</span> <span class="s">"Created"</span>
            <span class="o">},</span>
            <span class="s">"401"</span><span class="o">:</span> <span class="o">{</span>
                <span class="s">"description"</span><span class="o">:</span> <span class="s">"Unauthorized"</span>
            <span class="o">},</span>
            <span class="s">"403"</span><span class="o">:</span> <span class="o">{</span>
                <span class="s">"description"</span><span class="o">:</span> <span class="s">"Forbidden"</span>
            <span class="o">},</span>
            <span class="s">"404"</span><span class="o">:</span> <span class="o">{</span>
                <span class="s">"description"</span><span class="o">:</span> <span class="s">"Not Found"</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="s">"security"</span><span class="o">:</span> <span class="o">[</span>
            <span class="o">{</span>
                <span class="s">"BearerToken"</span><span class="o">:</span> <span class="o">[</span>
                    <span class="s">"global"</span>
                <span class="o">]</span>
            <span class="o">},</span>
            <span class="o">{</span>
                <span class="s">"BearerToken1"</span><span class="o">:</span> <span class="o">[</span>
                    <span class="s">"global"</span>
                <span class="o">]</span>
            <span class="o">}</span>
        <span class="o">],</span>
        <span class="s">"deprecated"</span><span class="o">:</span> <span class="kc">false</span><span class="o">,</span>
        <span class="s">"x-order"</span><span class="o">:</span><span class="s">"1"</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="more">more</h3>

<p>swagger在Open API的规范文档中声明的是任意对象都可以有对象扩展,只要符合扩展规则即可(即扩展属性名称以<code class="language-plaintext highlighter-rouge">x-</code>开头)</p>

<h2 id="springfox实现">Springfox实现</h2>

<p>我们知道了扩展规则的定义,那么在Springfox中我们如何自定义实现呢?</p>

<p>在前面的文章中,我们介绍了springfox使用了Spring Plugin系统来增强整个框架的可扩展性,我想此时的你应该能明白了，如果要扩展path接口的属性,那么，其实我们只需要找到Springfox提供的Plugin接口，然后增加一个Plugin的接口实现，把我们的扩展属性增加进去即可</p>

<p>接下来,我们实现上面path接口的自定义<code class="language-plaintext highlighter-rouge">x-order</code>的属性扩展实现.</p>

<p>我们先来看Springfox将自己的Documentation对象转换为Swagger标准对象的代码</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="nc">Swagger</span> <span class="nf">mapDocumentation</span><span class="o">(</span><span class="nc">Documentation</span> <span class="n">from</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">from</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nc">Swagger</span> <span class="n">swagger</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Swagger</span><span class="o">();</span>

    <span class="n">swagger</span><span class="o">.</span><span class="na">setVendorExtensions</span><span class="o">(</span> <span class="n">vendorExtensionsMapper</span><span class="o">.</span><span class="na">mapExtensions</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getVendorExtensions</span><span class="o">()</span> <span class="o">)</span> <span class="o">);</span>
    <span class="n">swagger</span><span class="o">.</span><span class="na">setSchemes</span><span class="o">(</span> <span class="n">mapSchemes</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getSchemes</span><span class="o">()</span> <span class="o">)</span> <span class="o">);</span>
    <span class="c1">//path转换</span>
    <span class="n">swagger</span><span class="o">.</span><span class="na">setPaths</span><span class="o">(</span> <span class="n">mapApiListings</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getApiListings</span><span class="o">()</span> <span class="o">)</span> <span class="o">);</span>
    <span class="n">swagger</span><span class="o">.</span><span class="na">setHost</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getHost</span><span class="o">()</span> <span class="o">);</span>
    <span class="n">swagger</span><span class="o">.</span><span class="na">setDefinitions</span><span class="o">(</span> <span class="n">modelMapper</span><span class="o">.</span><span class="na">modelsFromApiListings</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getApiListings</span><span class="o">()</span> <span class="o">)</span> <span class="o">);</span>
    <span class="n">swagger</span><span class="o">.</span><span class="na">setSecurityDefinitions</span><span class="o">(</span> <span class="n">securityMapper</span><span class="o">.</span><span class="na">toSecuritySchemeDefinitions</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getResourceListing</span><span class="o">()</span> <span class="o">)</span> <span class="o">);</span>
    <span class="nc">ApiInfo</span> <span class="n">info</span> <span class="o">=</span> <span class="n">fromResourceListingInfo</span><span class="o">(</span> <span class="n">from</span> <span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">info</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
        <span class="n">swagger</span><span class="o">.</span><span class="na">setInfo</span><span class="o">(</span> <span class="n">mapApiInfo</span><span class="o">(</span> <span class="n">info</span> <span class="o">)</span> <span class="o">);</span>
    <span class="o">}</span>
    <span class="n">swagger</span><span class="o">.</span><span class="na">setBasePath</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getBasePath</span><span class="o">()</span> <span class="o">);</span>
    <span class="n">swagger</span><span class="o">.</span><span class="na">setTags</span><span class="o">(</span> <span class="n">tagSetToTagList</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getTags</span><span class="o">()</span> <span class="o">)</span> <span class="o">);</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">list2</span> <span class="o">=</span> <span class="n">from</span><span class="o">.</span><span class="na">getConsumes</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">list2</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
        <span class="n">swagger</span><span class="o">.</span><span class="na">setConsumes</span><span class="o">(</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;(</span> <span class="n">list2</span> <span class="o">)</span> <span class="o">);</span>
    <span class="o">}</span>
    <span class="k">else</span> <span class="o">{</span>
        <span class="n">swagger</span><span class="o">.</span><span class="na">setConsumes</span><span class="o">(</span> <span class="kc">null</span> <span class="o">);</span>
    <span class="o">}</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">list3</span> <span class="o">=</span> <span class="n">from</span><span class="o">.</span><span class="na">getProduces</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">list3</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
        <span class="n">swagger</span><span class="o">.</span><span class="na">setProduces</span><span class="o">(</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;(</span> <span class="n">list3</span> <span class="o">)</span> <span class="o">);</span>
    <span class="o">}</span>
    <span class="k">else</span> <span class="o">{</span>
        <span class="n">swagger</span><span class="o">.</span><span class="na">setProduces</span><span class="o">(</span> <span class="kc">null</span> <span class="o">);</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="n">swagger</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>既然我们的目标是path,那么来看<code class="language-plaintext highlighter-rouge">mapApiListings</code>方法</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">protected</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Path</span><span class="o">&gt;</span> <span class="nf">mapApiListings</span><span class="o">(</span><span class="nc">Multimap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">ApiListing</span><span class="o">&gt;</span> <span class="n">apiListings</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Path</span><span class="o">&gt;</span> <span class="n">paths</span> <span class="o">=</span> <span class="n">newTreeMap</span><span class="o">();</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">ApiListing</span> <span class="n">each</span> <span class="o">:</span> <span class="n">apiListings</span><span class="o">.</span><span class="na">values</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">for</span> <span class="o">(</span><span class="nc">ApiDescription</span> <span class="n">api</span> <span class="o">:</span> <span class="n">each</span><span class="o">.</span><span class="na">getApis</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">paths</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">api</span><span class="o">.</span><span class="na">getPath</span><span class="o">(),</span> <span class="n">mapOperations</span><span class="o">(</span><span class="n">api</span><span class="o">,</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">fromNullable</span><span class="o">(</span><span class="n">paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">api</span><span class="o">.</span><span class="na">getPath</span><span class="o">()))));</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">paths</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div></div>

<p>程序的逻辑是：</p>

<ul>
  <li>声明一个map数组,key是接口路径,value是path对象</li>
  <li>遍历springfox中的ApiListing集合对象(类似于controller)</li>
  <li>遍历ApiDescription结合对象（类似于接口method）</li>
  <li>最终拿到apiDescription的接口地址,将operation对象转换为path</li>
</ul>

<p>继续来看<code class="language-plaintext highlighter-rouge">mapOperations</code>方法</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="nc">Path</span> <span class="nf">mapOperations</span><span class="o">(</span><span class="nc">ApiDescription</span> <span class="n">api</span><span class="o">,</span> <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Path</span><span class="o">&gt;</span> <span class="n">existingPath</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Path</span> <span class="n">path</span> <span class="o">=</span> <span class="n">existingPath</span><span class="o">.</span><span class="na">or</span><span class="o">(</span><span class="k">new</span> <span class="nc">Path</span><span class="o">());</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">springfox</span><span class="o">.</span><span class="na">documentation</span><span class="o">.</span><span class="na">service</span><span class="o">.</span><span class="na">Operation</span> <span class="n">each</span> <span class="o">:</span> <span class="n">nullToEmptyList</span><span class="o">(</span><span class="n">api</span><span class="o">.</span><span class="na">getOperations</span><span class="o">()))</span> <span class="o">{</span>
      <span class="nc">Operation</span> <span class="n">operation</span> <span class="o">=</span> <span class="n">mapOperation</span><span class="o">(</span><span class="n">each</span><span class="o">);</span>
      <span class="n">path</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">each</span><span class="o">.</span><span class="na">getMethod</span><span class="o">().</span><span class="na">toString</span><span class="o">().</span><span class="na">toLowerCase</span><span class="o">(),</span> <span class="n">operation</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">path</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div></div>

<table>
  <tbody>
    <tr>
      <td>循环遍历所有的Operation,此处为什么有循环,因为我们同一个接口允许存在不同的请求方式(GET</td>
      <td>POST</td>
      <td>PUT</td>
      <td>DELETE…),但是请求体可以相同</td>
    </tr>
  </tbody>
</table>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="n">io</span><span class="o">.</span><span class="na">swagger</span><span class="o">.</span><span class="na">models</span><span class="o">.</span><span class="na">Operation</span> <span class="nf">mapOperation</span><span class="o">(</span><span class="nc">Operation</span> <span class="n">from</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">from</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="n">io</span><span class="o">.</span><span class="na">swagger</span><span class="o">.</span><span class="na">models</span><span class="o">.</span><span class="na">Operation</span> <span class="n">operation</span> <span class="o">=</span> <span class="k">new</span> <span class="n">io</span><span class="o">.</span><span class="na">swagger</span><span class="o">.</span><span class="na">models</span><span class="o">.</span><span class="na">Operation</span><span class="o">();</span>

    <span class="n">operation</span><span class="o">.</span><span class="na">setSecurity</span><span class="o">(</span> <span class="n">mapAuthorizations</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getSecurityReferences</span><span class="o">()</span> <span class="o">)</span> <span class="o">);</span>
    <span class="n">operation</span><span class="o">.</span><span class="na">setVendorExtensions</span><span class="o">(</span> <span class="n">vendorExtensionsMapper</span><span class="o">.</span><span class="na">mapExtensions</span><span class="o">(</span> <span class="n">from</span><span class="o">.</span><span class="na">getVendorExtensions</span><span class="o">()</span> <span class="o">)</span> <span class="o">);</span>
</code></pre></div></div>

<p>看到<code class="language-plaintext highlighter-rouge">mapOperation</code>方法时,我们终于看到了setVendorExtensions的操作,即赋值扩展属性</p>

<p>那么来看扩展属性是如何来实现的</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Mapper</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">VendorExtensionsMapper</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">mapExtensions</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">VendorExtension</span><span class="o">&gt;</span> <span class="n">from</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">extensions</span> <span class="o">=</span> <span class="n">newTreeMap</span><span class="o">();</span>
    <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">ListVendorExtension</span><span class="o">&gt;</span> <span class="n">listExtensions</span> <span class="o">=</span> <span class="n">from</span><span class="o">(</span><span class="n">from</span><span class="o">)</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="nc">ListVendorExtension</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">ListVendorExtension</span> <span class="n">each</span> <span class="o">:</span> <span class="n">listExtensions</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">extensions</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">each</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">each</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
    <span class="o">}</span>
    <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;&gt;</span> <span class="n">objectExtensions</span> <span class="o">=</span> <span class="n">from</span><span class="o">(</span><span class="n">from</span><span class="o">)</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="nc">ObjectVendorExtension</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
        <span class="o">.</span><span class="na">transform</span><span class="o">(</span><span class="n">toExtensionMap</span><span class="o">());</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">each</span> <span class="o">:</span> <span class="n">objectExtensions</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">extensions</span><span class="o">.</span><span class="na">putAll</span><span class="o">(</span><span class="n">each</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">StringVendorExtension</span><span class="o">&gt;</span> <span class="n">propertyExtensions</span> <span class="o">=</span> <span class="n">from</span><span class="o">(</span><span class="n">from</span><span class="o">)</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="nc">StringVendorExtension</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">StringVendorExtension</span> <span class="n">each</span> <span class="o">:</span> <span class="n">propertyExtensions</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">extensions</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">each</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">each</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">extensions</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div></div>

<p>通过<code class="language-plaintext highlighter-rouge">VendorExtensionsMapper</code>中的扩展属性方法,我们看到,springfox目前做了限制,因为<code class="language-plaintext highlighter-rouge">VendorExtension</code>是接口,我们可以有我们自己的定义实现,但是springfox最终会对扩展接口进行filter过滤,从代码中我们看到,springfox目前只允许三种扩展实现</p>

<p>分别是：</p>

<ul>
  <li>ListVendorExtension:列表的形式,该对象支持泛型，最终形式：”x-field”:[{field:value}]</li>
  <li>ObjectVendorExtension:对象的扩展形式,最终的扩展形式是：”x-field”:[{field:value}]</li>
  <li>StringVendorExtension:string类型的扩展实现，最终的扩展形式是”x-field”:”value”</li>
</ul>

<p>既然springfox给我们提供了默认的三种扩展实现,那么针对上面的我们需要扩展path的扩展属性,我们使用<code class="language-plaintext highlighter-rouge">StringVendorExtension:string</code>这种类型即可</p>

<p>针对path的operation操作，我们在前面也介绍过,springfox最终使用的是<code class="language-plaintext highlighter-rouge">OperationBuilderPlugin</code>接口</p>

<p>那么我们只需要写一个<code class="language-plaintext highlighter-rouge">OperationBuilderPlugin</code>Plugin接口的实现即可</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="nd">@Order</span><span class="o">(</span><span class="nc">Ordered</span><span class="o">.</span><span class="na">HIGHEST_PRECEDENCE</span><span class="o">+</span><span class="mi">100</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OperationPositionBulderPlugin</span> <span class="kd">implements</span> <span class="nc">OperationBuilderPlugin</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">OperationContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">context</span><span class="o">.</span><span class="na">operationBuilder</span><span class="o">().</span><span class="na">extensions</span><span class="o">(</span><span class="nc">Lists</span><span class="o">.</span><span class="na">newArrayList</span><span class="o">(</span><span class="k">new</span> <span class="nc">StringVendorExtension</span><span class="o">(</span><span class="s">"x-order"</span><span class="o">,</span><span class="s">"1"</span><span class="o">)));</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supports</span><span class="o">(</span><span class="nc">DocumentationType</span> <span class="n">delimiter</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>目前假设我们给所有的接口都赋予扩展属性<code class="language-plaintext highlighter-rouge">x-order</code>,默认值为”1”</p>

<p>此时,我们来看/v2/api-docs接口响应的JSON示例</p>

<p><img src="/images/springfox/springfox-19-extensions.png" alt="" /></p>

<p>上图中,我们其实可以看到我们的自定义扩展属性实现了</p>

<p>然后我们在结合我们自定义的swagger-bootstrap-ui前端UI渲染程序,把order字段作为path接口的排序字段，在页面进行排序显示,这样我们就实现了我们的接口自定义排序规则了</p>

<p>有可能细心的朋友会问,我们给的order值都是1,如果给与开发者在代码中给接口自定义的值呢</p>

<p>此时，有两种方式</p>

<ul>
  <li>基于swagger-bootstrap-ui提供的注解<code class="language-plaintext highlighter-rouge">@ApiOperationSort</code>进行获取</li>
  <li>基于swagger的默认注解<code class="language-plaintext highlighter-rouge">@ApiOperation</code>中的postion属性进行二次利用</li>
</ul>

<p>此时,我们的接口代码可能会如下：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/createOr33der"</span><span class="o">)</span>
<span class="nd">@ApiOperation</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"创建订单"</span><span class="o">,</span><span class="n">position</span> <span class="o">=</span> <span class="mi">2</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">Rest</span><span class="o">&lt;</span><span class="nc">Order</span><span class="o">&gt;</span> <span class="nf">createOrdetr</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">Order</span> <span class="n">order</span><span class="o">,</span><span class="nc">HttpSession</span> <span class="n">httpSession</span><span class="o">){</span>
    <span class="nc">Rest</span><span class="o">&lt;</span><span class="nc">Order</span><span class="o">&gt;</span> <span class="n">r</span><span class="o">=</span><span class="k">new</span> <span class="nc">Rest</span><span class="o">&lt;&gt;();</span>
    <span class="n">r</span><span class="o">.</span><span class="na">setData</span><span class="o">(</span><span class="n">order</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">r</span><span class="o">;</span>
<span class="o">}</span>

<span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/createOrder"</span><span class="o">)</span>
<span class="nd">@ApiOperationSort</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
<span class="nd">@ApiOperation</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"hash测试"</span><span class="o">,</span><span class="n">nickname</span> <span class="o">=</span> <span class="s">"test"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">Rest</span><span class="o">&lt;</span><span class="nc">Order</span><span class="o">&gt;</span> <span class="nf">createOrder</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">Order</span> <span class="n">order</span><span class="o">){</span>
    <span class="nc">Rest</span><span class="o">&lt;</span><span class="nc">Order</span><span class="o">&gt;</span> <span class="n">r</span><span class="o">=</span><span class="k">new</span> <span class="nc">Rest</span><span class="o">&lt;&gt;();</span>
    <span class="n">r</span><span class="o">.</span><span class="na">setData</span><span class="o">(</span><span class="n">order</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">r</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>两种方式,取第一种即可</p>

<p>这时,我们更改一下上面我们的Plugin接口实现</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">OperationContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">position</span><span class="o">=</span><span class="nc">Integer</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">;</span>
    <span class="c1">//首先查找ApiOperation注解</span>
    <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">ApiOperation</span><span class="o">&gt;</span> <span class="n">api</span><span class="o">=</span><span class="n">context</span><span class="o">.</span><span class="na">findAnnotation</span><span class="o">(</span><span class="nc">ApiOperation</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">api</span><span class="o">.</span><span class="na">isPresent</span><span class="o">()){</span>
        <span class="c1">//判断postion是否有值</span>
        <span class="kt">int</span> <span class="n">posit</span><span class="o">=</span><span class="n">api</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">position</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">posit</span><span class="o">!=</span><span class="mi">0</span><span class="o">){</span>
            <span class="n">position</span><span class="o">=</span><span class="n">posit</span><span class="o">;</span>
        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
            <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">ApiOperationSort</span><span class="o">&gt;</span> <span class="n">apiOperationSortOptional</span><span class="o">=</span><span class="n">context</span><span class="o">.</span><span class="na">findAnnotation</span><span class="o">(</span><span class="nc">ApiOperationSort</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">apiOperationSortOptional</span><span class="o">.</span><span class="na">isPresent</span><span class="o">()){</span>
                <span class="n">position</span><span class="o">=</span><span class="n">apiOperationSortOptional</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">value</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span><span class="k">else</span><span class="o">{</span>
        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">ApiOperationSort</span><span class="o">&gt;</span> <span class="n">apiOperationSortOptional</span><span class="o">=</span><span class="n">context</span><span class="o">.</span><span class="na">findAnnotation</span><span class="o">(</span><span class="nc">ApiOperationSort</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">apiOperationSortOptional</span><span class="o">.</span><span class="na">isPresent</span><span class="o">()){</span>
            <span class="n">position</span><span class="o">=</span><span class="n">apiOperationSortOptional</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">value</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="n">context</span><span class="o">.</span><span class="na">operationBuilder</span><span class="o">().</span><span class="na">extensions</span><span class="o">(</span><span class="nc">Lists</span><span class="o">.</span><span class="na">newArrayList</span><span class="o">(</span><span class="k">new</span> <span class="nc">StringVendorExtension</span><span class="o">(</span><span class="s">"x-order"</span><span class="o">,</span><span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">position</span><span class="o">))));</span>
<span class="o">}</span>
</code></pre></div></div>

<p>此时,我们再来看JSON效果</p>

<p><img src="/images/springfox/springfox-19-extensions1.png" alt="" /></p>

<p>此时,我们看到，我们的自定义属性已经出现了,而且是根据开发者自定义的实现,此时我们的目的也达到了.</p>

    </article>
    <div class="share">
      <div class="share-component"></div>
    </div>
    <div class="comment">
      

  

  
        <div id="gitalk-container"></div>
        <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
        <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
        <script>
        var gitalk = new Gitalk({
            id: '/2019/05/29/springfox-13/',
            clientID: 'af23e0d8d5f41c7b3719',
            clientSecret: '822f4fcf8e75da6193bd6f26bab3111ecce89142',
            repo: 'blog-comments',
            owner: 'xiaoymin',
            admin: ['xiaoymin'],
            labels: ['gitment'],
            perPage: 50,
        })
        gitalk.render('gitalk-container')
        </script>
  


    </div>
  </div>
  <div class="column one-fourth">
    
<h3>站内搜索</h3>
<div id="site_search">
    <input type="text" id="search_box" placeholder="搜索">
</div>

<ul id="search_results"></ul>

<link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/modules/sidebar-search.css">
<script src="http://localhost:4000/assets/js/simple-jekyll-search.min.js"></script>
<script src="http://localhost:4000/assets/js/search.js"></script>

<script type="text/javascript">
SimpleJekyllSearch({
    searchInput: document.getElementById('search_box'),
    resultsContainer: document.getElementById('search_results'),
    json: 'http://localhost:4000/assets/search_data.json',
    searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>',
    noResultsText: 'No results found',
    limit: 10,
    fuzzy: false,
    exclude: ['Welcome']
})
</script>

    

    <div class="xiaoym-bot">
  <div class="xiaoym-qrcode-title">
    <h3>TorchV Bot开放试用中......</h3>
  </div>
  <div style="text-align: center;">
    <a target="_blank" href="https://www.luxiangdong.com/2024/01/25/lanuch-1/?utm_source=xiaoymin"><img width="300"
        src="/images/website/bot/torchv_bot2.png" /></a>
  </div>
</div>
<div class="xiaoym-qrcode">
  <div class="xiaoym-qrcode-title">
    <h3>最新内容,关注“八一菜刀”公众号</h3>
  </div>
  <div style="text-align: center;"><img src="/images/website/mp/qrcode_mini.jpg" /> </div>
</div>

<h3 class="post-directory-title mobile-hidden">Table of Contents</h3>
<div id="post-directory-module" class="mobile-hidden">
  <section class="post-directory">
    <!-- Links that trigger the jumping -->
    <!-- Added by javascript below -->
    <dl></dl>
  </section>
</div>


<script src="http://localhost:4000/assets/js/jquery.toc.js"></script>
  </div>
</div>
</section>
<!-- /section.content -->

    <footer class="container">
        <div class="site-footer" role="contentinfo">
            <div class="copyright left mobile-block">
                    © 2015
                    <span title="肖玉民">肖玉民</span>
                    <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a>
            </div>

            <ul class="site-footer-links right mobile-hidden">
                <li>
                    <a href="javascript:window.scrollTo(0,0)" >TOP</a>
                </li>
            </ul>
            <a href="https://github.com/xiaoymin/xiaoymin.github.io" target="_blank" aria-label="view source code">
                <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
            </a>
            <ul class="site-footer-links mobile-hidden">
                
                <li>
                    <a href="http://localhost:4000/" title="首页" target="">首页</a>
                </li>
                
                <li>
                    <a href="http://localhost:4000/categories/" title="分类" target="">分类</a>
                </li>
                
                <li>
                    <a href="http://localhost:4000/archives/" title="归档" target="">归档</a>
                </li>
                
                <li>
                    <a href="http://localhost:4000/about/" title="关于" target="">关于</a>
                </li>
                
                <li><a href="http://localhost:4000/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li>
            </ul>

        </div>
        <div style="padding-bottom: 40px;
    font-size: 14px;
    height: 14px;
    vertical-align: middle;
    text-align: center;
    color: #999999;
    border-top: 1px solid #eee;">
            <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <span id="busuanzi_container_site_uv"> <strong>访客数</strong> <span id="busuanzi_value_site_uv"></span></span>
            <span id="busuanzi_container_site_pv"> <strong>访问量</strong> <span id="busuanzi_value_site_pv"></span></span>
        </div>
    </footer>
    <div class="tools-wrapper">
      <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a>
    </div>
    <!-- / footer -->
    <script src="http://localhost:4000/assets/vendor/share.js/dist/js/share.min.js"></script>
    <script src="http://localhost:4000/assets/js/geopattern.js"></script>
    <script src="http://localhost:4000/assets/js/prism.js"></script>
    <link rel="stylesheet" href="http://localhost:4000/assets/css/globals/prism.css">
    <script>
      jQuery(document).ready(function($) {
        // geopattern
        $('.geopattern').each(function(){
          $(this).geopattern($(this).data('pattern-id'));
        });
       // hljs.initHighlightingOnLoad();
      });
    </script>

    

    

    

    

    
</body>
</html>
