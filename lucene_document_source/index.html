<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.40.1" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Lucene(7.3.1)学习笔记-Document类源码解析 &middot; 八一菜刀</title>

  
  <link type="text/css" rel="stylesheet" href="https://xiaoymin.github.io/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://xiaoymin.github.io/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://xiaoymin.github.io/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://xiaoymin.github.io/css/hyde.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://xiaoymin.github.io/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="https://xiaoymin.github.io/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="八一菜刀" />

  
</head>

  <body class=" ">
  <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://xiaoymin.github.io/"><h1>八一菜刀</h1></a>
      <p class="lead">
       顺着生命的河流一起流淌,体会身边的每份感动和感悟. 
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="https://xiaoymin.github.io/">主页</a> </li>
      <li><a href="https://xiaoymin.github.io/blogs/"> 博客列表 </a></li><li><a href="https://xiaoymin.github.io/opensource/"> 开源软件 </a></li><li><a href="https://xiaoymin.github.io/softnews/"> 软件资讯 </a></li><li><a href="https://xiaoymin.github.io/about/"> 关于作者 </a></li>
    </ul>

    <p>&copy; 2018. All rights reserved. </p>
  </div>
</div>

    <div class="content container">
    <div class="post">
  <h1>Lucene(7.3.1)学习笔记-Document类源码解析</h1>
  <span class="post-date">2018-05-24</span>
  

<p>本笔记针对Lucene版本为7.3.1</p>

<h2 id="介绍">介绍</h2>

<p>Document对象是Lucene中搜索和索引的最小单元,一个文档对象，包含多个属性字段集合列表，每个字段对象都包含名称及字段值.</p>

<p>Documet类图结构</p>

<p><img src="Document.png" alt="" /></p>

<p>Document类实现了Iterable接口，接收<code>IndexableField</code>泛型类型</p>

<p>每个Document对象维护一个fields集合列表，Java代码如下：</p>

<pre><code class="language-java">private final List&lt;IndexableField&gt; fields = new ArrayList&lt;&gt;();
</code></pre>

<h2 id="构造函数">构造函数</h2>

<pre><code class="language-java">/** Constructs a new document with no fields. */
public Document() {}
</code></pre>

<h2 id="方法">方法</h2>

<table>
<thead>
<tr>
<th>返回类型</th>
<th>方法</th>
<th>描述</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>void</code></td>
<td><code>add(IndexableField field)</code></td>
<td>添加字段到文档中.</td>
</tr>

<tr>
<td><code>void</code></td>
<td><code>clear()</code></td>
<td>清除文档中所有字段.</td>
</tr>

<tr>
<td><code>String</code></td>
<td><code>get(String name)</code></td>
<td>返回字段string值，如果字段拥有相同的name，则返回最先添加的字段，否则返回null.</td>
</tr>

<tr>
<td><code>BytesRef</code></td>
<td><code>getBinaryValue(String name)</code></td>
<td>返回最先添加的字段name二进制值.</td>
</tr>

<tr>
<td><code>BytesRef[]</code></td>
<td><code>getBinaryValues(String name)</code></td>
<td>返回字段name的二进制值数组.</td>
</tr>

<tr>
<td><code>IndexableField</code></td>
<td><code>getField(String name)</code></td>
<td>返回字段.</td>
</tr>

<tr>
<td><code>List&lt;IndexableField&gt;</code></td>
<td><code>getFields()</code></td>
<td>返回只读字段List集合.</td>
</tr>

<tr>
<td><code>IndexableField[]</code></td>
<td><code>getFields(String name)</code></td>
<td>返回name匹配的字段数组.</td>
</tr>

<tr>
<td><code>String[]</code></td>
<td><code>getValues(String name)</code></td>
<td>返回name匹配的字段值数组.</td>
</tr>

<tr>
<td><code>Iterator&lt;IndexableField&gt;</code></td>
<td><code>iterator()</code></td>
<td></td>
</tr>

<tr>
<td><code>void</code></td>
<td><code>removeField(String name)</code></td>
<td>移除第一个匹配name的字段.</td>
</tr>

<tr>
<td><code>void</code></td>
<td><code>removeFields(String name)</code></td>
<td>移除所有name匹配的字段.</td>
</tr>

<tr>
<td><code>String</code></td>
<td><code>toString()</code></td>
<td>打印文档字段列表.</td>
</tr>
</tbody>
</table>

<h2 id="indexablefield">IndexableField</h2>

<p>索引的单个字段，该类是接口，主要包括方法：名称、索引类型、等</p>

<p>类图如下：</p>

<p><img src="TextField.png" alt="" /></p>

<p>子类实现:</p>

<ul>
<li>TextField</li>
<li>StringField</li>
<li>IntPoint</li>
<li>LongPoint</li>
<li>FloatPoint</li>
<li>DoublePoint</li>
<li>SortedDocValuesField</li>
<li>SortedSetDocValuesField</li>
<li>NumericDocValuesField</li>
<li>SortedNumericDocValuesField</li>
<li>StoredField</li>
</ul>

</div>


    </div>

    
  </body>
</html>