<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.40.1" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>个人开源作品：Spring MVC 关于jsonp跨域处理 &middot; 八一菜刀</title>

  
  <link type="text/css" rel="stylesheet" href="https://xiaoymin.github.io/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://xiaoymin.github.io/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://xiaoymin.github.io/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://xiaoymin.github.io/css/hyde.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://xiaoymin.github.io/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="https://xiaoymin.github.io/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="八一菜刀" />

  
</head>

  <body class=" ">
  <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://xiaoymin.github.io/"><h1>八一菜刀</h1></a>
      <p class="lead">
       顺着生命的河流一起流淌,体会身边的每份感动和感悟. 
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="https://xiaoymin.github.io/">主页</a> </li>
      <li><a href="https://xiaoymin.github.io/blogs/"> 博客列表 </a></li><li><a href="https://xiaoymin.github.io/opensource/"> 开源软件 </a></li><li><a href="https://xiaoymin.github.io/softnews/"> 软件资讯 </a></li><li><a href="https://xiaoymin.github.io/about/"> 关于作者 </a></li>
    </ul>

    <p>&copy; 2018. All rights reserved. </p>
  </div>
</div>

    <div class="content container">
    <div class="post">
  <h1>个人开源作品：Spring MVC 关于jsonp跨域处理</h1>
  <span class="post-date">2015-09-13</span>
  <p>1、新建JsonpAdvice控制器增强继承org.springframework.web.servlet.mvc.method.annotation.AbstractJsonpResponseBodyAdvice类</p>

<pre><code class="language-java"> package com.drore.jsonp.advice;

  import org.springframework.web.bind.annotation.ControllerAdvice;
  import org.springframework.web.servlet.mvc.method.annotation.AbstractJsonpResponseBodyAdvice;

  @ControllerAdvice
  public class JsonpAdvice extends AbstractJsonpResponseBodyAdvice{
  	public JsonpAdvice() {
  		super(&quot;callback&quot;,&quot;jsonp&quot;);
  	}
  }
</code></pre>

<p>2、所有controller类使用@RestController注解</p>

<pre><code class="language-java">package com.drore.jsonp.controller;
  
  import java.util.ArrayList;
  import java.util.HashMap;
  import java.util.List;
  import java.util.Map;
  
  import org.springframework.web.bind.annotation.RequestMapping;
  import org.springframework.web.bind.annotation.RestController;
  
  @RestController
  public class HomeController {

  
  	@RequestMapping(value=&quot;/render.json&quot;)
  	public List&lt;Map&lt;String, Object&gt;&gt; render(){
  		List&lt;Map&lt;String, Object&gt;&gt; list=new ArrayList&lt;Map&lt;String,Object&gt;&gt;();
  		for (int i = 0; i &lt; 10; i++) {
  			Map&lt;String, Object&gt; map=new HashMap&lt;String, Object&gt;();
  			map.put(&quot;userName&quot;, &quot;张三&quot;+i);
  			map.put(&quot;sex&quot;, &quot;男&quot;);
  			map.put(&quot;phone&quot;, &quot;1598723212&quot;+i);
  			list.add(map);
  		}
  		return list;
  	}
  }
</code></pre>

<p>3、jQuery跨域调用：</p>

<pre><code class="language-javascript"> $.ajax({
  	url:'http://localhost:9090/render.json',
  	dataType:'jsonp',
  	success:function(data){
  		console.log(data)
  	}
  })

  //返回json数据
  jQuery162036356921307742596_1442105501105([
      {
          &quot;phone&quot;: &quot;15987232120&quot;,
          &quot;sex&quot;: &quot;男&quot;,
          &quot;userName&quot;: &quot;张三0&quot;
      },
     //......
  ]);
</code></pre>

<p><strong>相关链接</strong></p>

<ul>
<li>jsonp 的详细介绍：<a href="https://gitee.com/xiaoym/jsonp">点击查看</a></li>
<li>jsonp 的下载地址：<a href="https://gitee.com/xiaoym/jsonp/releases">点击下载</a></li>
</ul>

</div>


    </div>

    
  </body>
</html>