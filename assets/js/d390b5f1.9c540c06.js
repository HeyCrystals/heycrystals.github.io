"use strict";(self.webpackChunkwiki=self.webpackChunkwiki||[]).push([[5682],{3905:(t,n,e)=>{e.d(n,{Zo:()=>u,kt:()=>d});var r=e(67294);function a(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function i(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function o(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?i(Object(e),!0).forEach((function(n){a(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function c(t,n){if(null==t)return{};var e,r,a=function(t,n){if(null==t)return{};var e,r,a={},i=Object.keys(t);for(r=0;r<i.length;r++)e=i[r],n.indexOf(e)>=0||(a[e]=t[e]);return a}(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)e=i[r],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(a[e]=t[e])}return a}var l=r.createContext({}),s=function(t){var n=r.useContext(l),e=n;return t&&(e="function"==typeof t?t(n):o(o({},n),t)),e},u=function(t){var n=s(t.components);return r.createElement(l.Provider,{value:n},t.children)},p={inlineCode:"code",wrapper:function(t){var n=t.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(t,n){var e=t.components,a=t.mdxType,i=t.originalType,l=t.parentName,u=c(t,["components","mdxType","originalType","parentName"]),m=s(e),d=a,y=m["".concat(l,".").concat(d)]||m[d]||p[d]||i;return e?r.createElement(y,o(o({ref:n},u),{},{components:e})):r.createElement(y,o({ref:n},u))}));function d(t,n){var e=arguments,a=n&&n.mdxType;if("string"==typeof t||a){var i=e.length,o=new Array(i);o[0]=m;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=t,c.mdxType="string"==typeof t?t:a,o[1]=c;for(var s=2;s<i;s++)o[s]=e[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,e)}m.displayName="MDXCreateElement"},10881:(t,n,e)=>{e.r(n),e.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>s});var r=e(87462),a=(e(67294),e(3905));const i={layout:"post",title:"mybatis \u6e90\u7801\u7cfb\u5217(\u516d) \u8bbe\u8ba1\u6a21\u5f0f",categories:"mybatis",description:"mybatis \u6e90\u7801\u7cfb\u5217",keywords:["mybatis \u6e90\u7801\u7cfb\u5217,mybatis,\u8bbe\u8ba1\u6a21\u5f0f"]},o=void 0,c={unversionedId:"mybatis/2019-05-17-mybatis-6",id:"mybatis/2019-05-17-mybatis-6",title:"mybatis \u6e90\u7801\u7cfb\u5217(\u516d) \u8bbe\u8ba1\u6a21\u5f0f",description:"mybatis \u6e90\u7801\u7cfb\u5217",source:"@site/programmer/blog/mybatis/2019-05-17-mybatis-6.md",sourceDirName:"mybatis",slug:"/mybatis/2019-05-17-mybatis-6",permalink:"/blog/mybatis/2019-05-17-mybatis-6",draft:!1,editUrl:"https://github.com/xiaoymin/blog-ai/blob/master/programmer/blog/mybatis/2019-05-17-mybatis-6.md",tags:[],version:"current",lastUpdatedBy:"xiaoyumin",lastUpdatedAt:1686478303,formattedLastUpdatedAt:"2023\u5e746\u670811\u65e5",frontMatter:{layout:"post",title:"mybatis \u6e90\u7801\u7cfb\u5217(\u516d) \u8bbe\u8ba1\u6a21\u5f0f",categories:"mybatis",description:"mybatis \u6e90\u7801\u7cfb\u5217",keywords:["mybatis \u6e90\u7801\u7cfb\u5217,mybatis,\u8bbe\u8ba1\u6a21\u5f0f"]},sidebar:"tutorialSidebar",previous:{title:"mybatis \u6e90\u7801\u7cfb\u5217(\u4e94) \u6570\u636e\u6e90DataSource",permalink:"/blog/mybatis/2019-05-16-mybatis-5"},next:{title:"mybatis \u6e90\u7801\u7cfb\u5217(\u4e03) Java\u57fa\u7840\u4e4b\u6570\u636e\u5e93\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b",permalink:"/blog/mybatis/2019-05-18-mybatis-7"}},l={},s=[{value:"Builder\u6a21\u5f0f",id:"builder\u6a21\u5f0f",level:2}],u={toc:s};function p(t){let{components:n,...e}=t;return(0,a.kt)("wrapper",(0,r.Z)({},u,e,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"\u4ee5\u524d\u6211\u4eec\u5728\u5b66\u4e60Java\u7684\u65f6\u5019,\u90fd\u4f1a\u5c06Java\u4e2d\u7684\u8bbe\u8ba1\u6a21\u5f0f,\u8bb0\u5fc6\u4e2d\u7528\u7684\u6bd4\u8f83\u591a\u7684\u597d\u50cf\u670923\u79cd\u5427,\u4f46\u662f\u8fd9\u4e9b\u8bbe\u8ba1\u6a21\u5f0f\u5176\u5b9e\u81ea\u5df1\u5728\u5de5\u4f5c\u4e2d\u9664\u4e86\u90a3\u4e48\u51e0\u79cd\u51e0\u4e4e\u5f88\u5c11\u7528\u5230."),(0,a.kt)("p",null,"\u4e0d\u8fc7\u6700\u8fd1\u5728\u770bmybatis\u7684\u6e90\u7801,\u770b\u5230\u4e86\u5f88\u591a\u8bbe\u8ba1\u6a21\u5f0f\u7684\u5e94\u7528,\u56e0\u6b64,\u60f3\u628a\u8fd9\u4e9b\u5728mybatis\u4e2d\u8fd0\u7528\u7684\u8bbe\u8ba1\u6a21\u5f0f\u90fd\u8bb0\u5f55\u4e0b\u6765,\u52a0\u6df1\u81ea\u5df1\u7684\u5370\u8c61\u548c\u7406\u89e3,\u540e\u9762\u4e5f\u53ef\u4ee5\u5728\u5de5\u4f5c\u4e2d\u66f4\u591a\u7684\u53bb\u4f7f\u7528\u5b83"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u5199\u4ee3\u7801\u662f\u4eec\u827a\u672f\u6d3b")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u4f60\u662f\u5426\u4f1a\u770b\u67d0\u4e9b\u4ee3\u7801\u800c\u5165\u8ff7\u5462?")),(0,a.kt)("h2",{id:"builder\u6a21\u5f0f"},"Builder\u6a21\u5f0f"),(0,a.kt)("p",null,"\u63d0\u4f9b\u4e00\u4e2aBuilder\u5efa\u9020\u5668,\u901a\u8fc7\u9690\u85cf\u76ee\u6807\u5bf9\u8c61\u7684\u590d\u6742\u5c5e\u6027\uff0c\u800c\u662f\u901a\u8fc7Bulder\u6765\u4e00\u6b65\u4e00\u6b65\u8d4b\u503c\u76ee\u6807\u5bf9\u8c61\u5c5e\u6027,\u6700\u7ec8Builder\u6784\u5efa\u76ee\u6807\u5bf9\u8c61,\u8fd9\u4e2a\u5728mybatis\u4e2d\u7684Envionment\u7c7b\u4e2d\u7684Builder\u5df2\u4f7f\u7528"),(0,a.kt)("p",null,"\u5148\u6765\u770b",(0,a.kt)("inlineCode",{parentName:"p"},"org.apache.ibatis.mapping.Envionment.java")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'/**\n * \u73af\u5883\u5bf9\u8c61\n * @author Clinton Begin\n */\npublic final class Environment {\n  /***\n   * \u73af\u5883id,\u4f8b\u5982\uff1adev\u3001prod\n   */\n  private final String id;\n  /***\n   * \u4e8b\u52a1\u5de5\u5382\n   */\n  private final TransactionFactory transactionFactory;\n  /***\n   * \u6570\u636e\u5e93\u8fde\u63a5\u6570\u636e\u6e90\u5bf9\u8c61\n   */\n  private final DataSource dataSource;\n //getter and setters and  constructs   \n    \n    /***\n   * Builder\u6784\u9020\u5668\n   * \u6bd4\u5982\n   * new Builder("dev").dataSource(ds).transactionFactory(tf).build();\n   */\n  public static class Builder {\n      private String id;\n      private TransactionFactory transactionFactory;\n      private DataSource dataSource;\n\n    public Builder(String id) {\n      this.id = id;\n    }\n\n    public Builder transactionFactory(TransactionFactory transactionFactory) {\n      this.transactionFactory = transactionFactory;\n      return this;\n    }\n\n    public Builder dataSource(DataSource dataSource) {\n      this.dataSource = dataSource;\n      return this;\n    }\n\n    public String id() {\n      return this.id;\n    }\n\n    public Environment build() {\n      return new Environment(this.id, this.transactionFactory, this.dataSource);\n    }\n\n  }\n    \n}\n')),(0,a.kt)("p",null,"\u901a\u8fc7\u4e0a\u9762\u7684Builder\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e00\u7684\u4ee3\u7801\u6765\u6784\u5efa\u6211\u4eec\u7684Environment\u5bf9\u8c61"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'//\u5c5e\u6027\u4e4b\u6570\u636e\u6e90\nDataSource dataSource=null;\n//\u5c5e\u6027\u4e4b\u4e8b\u52a1\u7ba1\u7406\u5668\nTransactionFactory transactionFactory=null;\n//\u57fa\u4e8eBuilder\u6765\u6784\u5efa\nEnvironment environment=new Environment.Builder("dev").dataSource(dataSource).transactionFactory(transactionFactory).build();\n//\u6839\u636e\u6784\u9020\u51fd\u6570\u6765\u6784\u5efa\nEnvironment environment1=new Environment("prod",transactionFactory,dataSource);\n')),(0,a.kt)("p",null,"\u8fd9\u53ea\u662f\u63d0\u4f9b\u4e86\u4e00\u79cd\u5feb\u6377\u7684\u521b\u5efa\u5bf9\u8c61\u7684\u65b9\u5f0f,\u6700\u7ec8build()\u65b9\u6cd5\u4e5f\u662f\u8c03\u7528\u76ee\u6807\u5bf9\u8c61\u7684\u6784\u9020\u51fd\u6570\u6765\u8fdb\u884c\u6784\u5efa,\u6839\u636e\u5f00\u53d1\u8005\u559c\u6b22\u53ef\u4ee5\u81ea\u884c\u4f7f\u7528."))}p.isMDXComponent=!0}}]);