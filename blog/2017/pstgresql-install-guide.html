<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>PostgreSQL安装指南</title>
    <meta name="keywords" content="xiaoymin的博客,PostgreSQL,PostgreSQL安装指南" />
    <meta name="description" itemprop="description" content="PostgreSQL安装指南">
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <link rel="icon" href="/favicon.ico" type="image/x-icon" id="page_favionc" />
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="/lib/layui/css/layui.css"  media="all" />
    <script src="/lib/layui/layui.js" charset="utf-8"></script>
    <link rel="stylesheet" href="/css/xiaoymin.css"  media="all" />
    <link rel="stylesheet" href="/css/markdown.css"  media="all" />
    <link rel="stylesheet" href="/lib/ztree_toc/css/zTreeStyle/zTreeStyle.css" type="text/css">
    <script type="text/javascript" src="/lib/ztree_toc/js/jquery.ztree.core-3.5.min.js"></script>
    <script type="text/javascript" src="/lib/ztree_toc/ztree_toc.js"></script>
    <style type="text/css">
        body{
            overflow: hidden;
        }
    </style>
</head>
<body>
<div class="layui-row">
    <div class="layui-col-xs3" style="border:2px dashed rgba(111, 94, 94, 0.27);">
        <div class="grid-demo grid-demo-bg1" style="overflow-y: auto;height: 100%;">
            <ul id="tree" class="ztree">

            </ul>
        </div>
    </div>
    <div class="layui-col-xs9">
        <div class="grid-demo" style="overflow-y: auto;height: 100%;">
            <div  id='write'  class = 'is-node'><h1><a name='header-n0' class='md-header-anchor '></a>PostgreSQL安装</h1><h2><a name='header-n2' class='md-header-anchor '></a>下载</h2><p>本次教程记录postgresql安装过程</p><p>下载二进制文件：<a href='https://www.enterprisedb.com/download-postgresql-binaries' target='_blank' >https://www.enterprisedb.com/download-postgresql-binaries</a></p><p>下载版本：<strong>*Version 9.6.5*</strong></p><p>系统：win10 64位</p><h2><a name='header-n11' class='md-header-anchor '></a>解压</h2><p>本次解压目录是<code>D:\Users\xiaoymin\Bin\pgsql</code></p><h2><a name='header-n14' class='md-header-anchor '></a>初始化</h2><p>开cmd管理员窗口</p><p>执行命令：</p><pre class="md-fences md-end-block" lang="shell"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure">AخA</div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;">initdb <span class="cm-attribute">--pgdata</span><span class="cm-operator">=</span>D:\Users\xiaoymin\Bin\pgsql\data <span class="cm-attribute">--encoding</span><span class="cm-operator">=</span>UTF8 <span class="cm-attribute">--locale</span><span class="cm-operator">=</span>C</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p>输出：</p><pre class="md-fences md-end-block" lang="shell"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;">D:\Users\xiaoymin\Bin\pgsql\bin&gt;initdb <span class="cm-attribute">--pgdata</span><span class="cm-operator">=</span>D:\Users\xiaoymin\Bin\pgsql\data <span class="cm-attribute">--encoding</span><span class="cm-operator">=</span>UTF8 <span class="cm-attribute">--locale</span><span class="cm-operator">=</span>C</span></pre></div><pre class=""><span style="padding-right: 0.1px;">属于此数据库系统的文件宿主为用户 <span class="cm-string">"xiaoymin"</span>.</span></pre><pre class=""><span style="padding-right: 0.1px;">此用户也必须为服务器进程的宿主.</span></pre><pre class=""><span style="padding-right: 0.1px;">数据库簇将使用本地化语言 <span class="cm-string">"C"</span>进行初始化.</span></pre><pre class=""><span style="padding-right: 0.1px;">缺省的文本搜索配置将会被设置到<span class="cm-string">"english"</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">禁止为数据页生成校验和.</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">创建目录 D:/Users/xiaoymin/Bin/pgsql/data ... 成功</span></pre><pre class=""><span style="padding-right: 0.1px;">正在创建子目录 ... 成功</span></pre><pre class=""><span style="padding-right: 0.1px;">选择默认最大联接数 (max_connections) ... 100</span></pre><pre class=""><span style="padding-right: 0.1px;">选择默认共享缓冲区大小 (shared_buffers) ... 128MB</span></pre><pre class=""><span style="padding-right: 0.1px;">选择动态共享内存实现 ......windows</span></pre><pre class=""><span style="padding-right: 0.1px;">创建配置文件 ... 成功</span></pre><pre class=""><span style="padding-right: 0.1px;">正在运行自举脚本 ...成功</span></pre><pre class=""><span style="padding-right: 0.1px;">正在执行自举后初始化 ...成功</span></pre><pre class=""><span style="padding-right: 0.1px;">同步数据到磁盘...成功</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">警告:为本地连接启动了 <span class="cm-string">"trust"</span> 认证.</span></pre><pre class=""><span style="padding-right: 0.1px;">你可以通过编辑 pg_hba.conf 更改或你下次</span></pre><pre class=""><span style="padding-right: 0.1px;">行 initdb 时使用 <span class="cm-attribute">-A</span>或者--auth-local和--auth-host选项.</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">成功。您现在可以用下面的命令开启数据库服务器：</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-string">"pg_ctl"</span> <span class="cm-attribute">-D</span> <span class="cm-string">"D:\Users\xiaoymin\Bin\pgsql\data"</span> <span class="cm-attribute">-l</span> logfile <span class="cm-builtin">start</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 575px;"></div></div></div></pre><p></p><p>具体参数命令,可以使用--help展现：</p><pre class="md-fences md-end-block" lang="shell"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;">D:\Users\xiaoymin\Bin\pgsql\bin&gt;initdb <span class="cm-attribute">--help</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;">initdb 初始化一个 PostgreSQL 数据库簇.</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">使用方法:</span></pre><pre class=""><span style="padding-right: 0.1px;">  initdb [选项]... [DATADIR]</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">选项:</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">-A</span>, <span class="cm-attribute">--auth</span><span class="cm-operator">=</span>METHOD &nbsp; &nbsp; &nbsp; &nbsp; 本地连接的默认认证方法</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-attribute">--auth-host</span><span class="cm-operator">=</span>METHOD &nbsp; 本地的TCP/IP连接的默认认证方法</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-attribute">--auth-local</span><span class="cm-operator">=</span>METHOD &nbsp; 本地socket连接的默认认证方法</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">-D</span>, <span class="cm-attribute">--pgdata</span><span class="cm-operator">=</span>DATADIR &nbsp; &nbsp;  当前数据库簇的位置</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">-E</span>, <span class="cm-attribute">--encoding</span><span class="cm-operator">=</span>ENCODING &nbsp; 为新数据库设置默认编码</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-attribute">--locale</span><span class="cm-operator">=</span>LOCALE &nbsp; &nbsp;  为新数据库设置默认语言环境</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">--lc-collate</span>, <span class="cm-attribute">--lc-ctype</span>, <span class="cm-attribute">--lc-messages</span><span class="cm-operator">=</span>LOCALE</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">--lc-monetary</span>, <span class="cm-attribute">--lc-numeric</span>, <span class="cm-attribute">--lc-time</span><span class="cm-operator">=</span>LOCALE</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  为新的数据库簇在各自的目录中分别</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 设定缺省语言环境（默认使用环境变</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 量)</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">--no-locale</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 等同于 <span class="cm-attribute">--locale</span><span class="cm-operator">=</span>C</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">--pwfile</span><span class="cm-operator">=</span>文件名 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 对于新的超级用户从文件读取口令</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">-T</span>, <span class="cm-attribute">--text-search-config</span><span class="cm-operator">=</span>CFG</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 缺省的文本搜索配置</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">-U</span>, <span class="cm-attribute">--username</span><span class="cm-operator">=</span>NAME &nbsp; &nbsp; &nbsp; 数据库超级用户名</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">-W</span>, <span class="cm-attribute">--pwprompt</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  对于新的超级用户提示输入口令</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">-X</span>, <span class="cm-attribute">--xlogdir</span><span class="cm-operator">=</span>XLOGDIR &nbsp; &nbsp; &nbsp; &nbsp;  当前事务日志目录的位置</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">非普通使用选项:</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">-d</span>, <span class="cm-attribute">--debug</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 产生大量的除错信息</span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-attribute">-k</span>, <span class="cm-attribute">--data-checksums</span> &nbsp;  使用数据页产生效验和</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">-L</span> DIRECTORY &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  输入文件的位置</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">-n</span>, <span class="cm-attribute">--noclean</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 出错后不清理</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">-N</span>, <span class="cm-attribute">--nosync</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 不用等待变化安全写入磁盘</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">-s</span>, <span class="cm-attribute">--show</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  显示内部设置</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">-S</span>, <span class="cm-attribute">--sync-only</span> &nbsp; &nbsp; &nbsp; &nbsp;  只同步数据目录</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">其它选项:</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">-V</span>, <span class="cm-attribute">--version</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 输出版本信息, 然后退出</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-attribute">-</span>?, <span class="cm-attribute">--help</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  显示此帮助, 然后退出</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">如果没有指定数据目录, 将使用环境变量 PGDATA</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">报告错误至 &lt;pgql-bugs@postgresql.org&gt;.</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 966px;"></div></div></div></pre><h2><a name='header-n28' class='md-header-anchor '></a>注册windows服务</h2><p>执行命令:</p><pre class="md-fences md-end-block" lang="shell"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;">D:\Users\xiaoymin\Bin\pgsql\bin&gt;pg_ctl.exe register <span class="cm-attribute">-D</span> D:\Users\xiaoymin\Bin\pgsql\data <span class="cm-attribute">-N</span> PgSQL</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h2><a name='header-n32' class='md-header-anchor '></a>启动服务</h2><pre class="md-fences md-end-block" lang="shell"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;">D:\Users\xiaoymin\Bin\pgsql\bin&gt;net <span class="cm-builtin">start</span> PgSQL</span></pre></div><pre class=""><span style="padding-right: 0.1px;">PgSQL 服务正在启动 .</span></pre><pre class=""><span style="padding-right: 0.1px;">PgSQL 服务已经启动成功。</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p></p></div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(function () {
        $('#tree').ztree_toc({
            is_auto_number:true
        });
    })
</script>
</body>
</html>